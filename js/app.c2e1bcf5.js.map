{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/HtmlView/HtmlView.vue?0970","webpack:///./src/components/CanvasView/BackgroundImage.vue?fc35","webpack:///./src/components/CanvasView/CanvasEffectView.vue?2770","webpack:///./src/App.vue?058e","webpack:///./src/components/CanvasView/CanvasEffectView.vue?6f2b","webpack:///./src/context/Context.vue?0636","webpack:///src/context/Context.vue","webpack:///./src/context/Context.vue?e41b","webpack:///./src/context/Context.vue","webpack:///./src/interection/scroll.js","webpack:///./src/interection/eventProvider.js","webpack:///./src/components/Effecter/Effects/DrawImage.js","webpack:///./src/components/Effecter/Effects/ColorNoise.js","webpack:///./src/components/Effecter/Effects/Color.js","webpack:///./src/components/Effecter/Effects/PixelSkewed.js","webpack:///./src/components/Effecter/Effects/PixelSkewed8.js","webpack:///./src/components/Effecter/Effects/LineSkewed.js","webpack:///./src/components/Effecter/Effects/LineWave.js","webpack:///./src/components/Effecter/Effects/Stay.js","webpack:///./src/components/Effecter/Effects/Style.js","webpack:///./src/components/AnimationController/CanvasEffect.js","webpack:///./src/util/canvasUtil.js","webpack:///src/components/CanvasView/CanvasEffectView.vue","webpack:///./src/components/CanvasView/CanvasEffectView.vue?b6e3","webpack:///./src/components/CanvasView/CanvasEffectView.vue","webpack:///./src/components/CanvasView/CanvasTextView.vue?bebd","webpack:///./src/config.js","webpack:///./src/components/Effecter/Eff/Stay.js","webpack:///./src/components/Effecter/Eff/SkewedRight.js","webpack:///./src/components/Effecter/Eff/SkewedLeft.js","webpack:///./src/components/Effecter/Eff/SkewedLeftReverse.js","webpack:///./src/components/Effecter/Eff/SkewedRightReverse.js","webpack:///./src/components/Effecter/Eff/PixelNoise.js","webpack:///./src/util/store.js","webpack:///./src/util/events.js","webpack:///./src/components/AnimationController/CanvasText.js","webpack:///./src/util/imageLoader.js","webpack:///./src/components/AnimationController/CanvasImage.js","webpack:///./src/components/CanvasView/CanvasLayer.vue?ffe2","webpack:///src/components/CanvasView/CanvasLayer.vue","webpack:///./src/components/CanvasView/CanvasLayer.vue?6497","webpack:///./src/components/CanvasView/CanvasLayer.vue","webpack:///src/components/CanvasView/CanvasTextView.vue","webpack:///./src/components/CanvasView/CanvasTextView.vue?c0ea","webpack:///./src/components/CanvasView/CanvasTextView.vue","webpack:///./src/components/HtmlView/HtmlView.vue?5362","webpack:///src/components/HtmlView/HtmlView.vue","webpack:///./src/components/HtmlView/HtmlView.vue?a3da","webpack:///./src/components/HtmlView/HtmlView.vue","webpack:///./src/components/CanvasView/BackgroundImage.vue?9004","webpack:///./src/util/diff.js","webpack:///src/components/CanvasView/BackgroundImage.vue","webpack:///./src/components/CanvasView/BackgroundImage.vue?f767","webpack:///./src/components/CanvasView/BackgroundImage.vue","webpack:///./src/HtmlSeq.js","webpack:///src/App.vue","webpack:///./src/App.vue?1160","webpack:///./src/App.vue","webpack:///./src/main.js","webpack:///./src/components/CanvasView/CanvasTextView.vue?af5a","webpack:///./src/App.vue?c650","webpack:///./src/components/CanvasView/CanvasLayer.vue?1e69","webpack:///./src/assets/vrmonkey_tran.png"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","attrs","scopedSlots","_u","fn","ref","context","bgcolor","directives","rawName","isHtmlView","expression","txts","imgs","staticClass","on","showHtmlView","_v","staticRenderFns","getCanvasWidth","getCanvasHeight","_t","callback","callbacks","keys","subscribe","keyName","params","getContext","setContext","ContextStore","props","contextKey","type","Array","watch","immediate","handler","mounted","_data","component","_scroller","_document","document","getElementsByTagName","height","getBoundingClientRect","scrollTop","addEventListener","top","scrollingElement","_","setHeight","style","getScroll","enable","scrollTo","behavior","disable","scroller","eventProvider","events","scrollCallback","prevValue","delivereEvent","_param","_events","event","from","to","diff","param","drawImage","ctx","rect","init","_ctx","src_ctx","_rect","_THRESHOLD","getImage","path","Promise","resolved","image","Image","onload","src","set","clearRect","width","save","restore","setTile","tile","rotate","_width","x","_height","y","colorNoise","dst","isColor","forceRelease","endFlag","isColorNoise","getImageData","createImageData","setColor","z","_rgb","g","b","getNoise","_isColor","Math","floor","random","col","scroll","rate","draw","release","putImageData","loop","console","log","Color","frgb","trgb","reverse","rgb","PixelSkewed","THRESHOLD","pixels","rr","a","index","clearCanvas","map","pix","radius","radian","PI","cos","sin","PixelSkewed8","rx","ry","sp","radius_x","radius_y","LineSkewed","isRandom","isRandomNoise","rands","drawPixel","prevPixel","nextPixel","_z","LineWave","Stay","setStyle","elem","fromVal","toVal","scale","transform","translateY","opacity","dwImg","pxlSkw","pxlSkw8","colNse","lnSkw","lnWve","sty","effect","refs","CanvasEffect","eff","fitRect","elmRect","imgRect","frame","img","left","_fitRect","fit","imageData","canvasData","edge","String","methods","clearTimeout","timer","setTimeout","resizeCanvas","computed","_l","txt","id","setCanvasRef","setCanvasImageRef","pixelRatio","srcRef","scrollY","drawRect","ctxSrc","SkewedRight","pixRate","toFixed","_y","SkewedLeft","SkewedLeftReverse","last","SkewedRightReverse","edge_index","PixelNoise","store","list","textStore","imageStore","clickEvent","hovers","start","e","pageX","pageY","move","point","isHit","getRectHit","end","setCallback","isCallback","setHover","removeCallback","Events","FillText","canvas","textRect","setText","text","maxWidth","fontFamily","fontSize","color","align","moveTo","letterSpacing","font","fillStyle","textAlign","_x","canvasRect","item","_maxwidth","fillText","positionX","min","max","redraw","getDrawRect","CanvasText","moveUpdated","moveperscroll","moveFrom","abs","_text","eventRect","link","status","classList","add","remove","strokeStyle","strokeRect","imageCache","images","loadImage","url","_img","newimage","date","Date","cache","imageLoader","FillImage","setImage","imageObj","visible","CanvasImage","refsFlag","default","$emit","$refs","$nextTick","canvasRef","components","CanvasTextLayer","CanvasImageLayer","show","Boolean","val1","val2","JSON","stringify","setBackgroundColor","newValue","getSize","bg","getStyle","HTML_VIEW_TYPE","TEXT","IMG","defaultValue","html","view","HtmlSeq","DEFAULT","innerHeight","IMAGE","OPEN1","CONTENTS_TYPE","STYLES","OPEN2","OPEN3","CENTER","FADEIN","TO","FROM","STAY","FADEOUT","CanvasTextView","HtmlView","BackgroundImage","ContextConsumer","Vue","config","productionTip","render","h","App","$mount"],"mappings":"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","file":"js/app.c2e1bcf5.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HtmlView.vue?vue&type=style&index=0&id=0fb3c0e8&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HtmlView.vue?vue&type=style&index=0&id=0fb3c0e8&lang=scss&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BackgroundImage.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BackgroundImage.vue?vue&type=style&index=0&lang=scss&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CanvasEffectView.vue?vue&type=style&index=0&id=75d94856&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CanvasEffectView.vue?vue&type=style&index=0&id=75d94856&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('ContextConsumer',{attrs:{\"contextKey\":['BGCOLOR']},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar context = ref.context;\nreturn [_c('BackgroundImage',{attrs:{\"color\":_vm.bgcolor}})]}}])}),_c('CanvasTextView',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isHtmlView),expression:\"!isHtmlView\"}],attrs:{\"txts\":_vm.txts,\"imgs\":_vm.imgs}}),_c('HtmlView',{attrs:{\"show\":_vm.isHtmlView}}),_c('div',{staticClass:\"navi\"},[_c('button',{on:{\"click\":_vm.showHtmlView}},[_vm._v(\"info\")])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"frame\",staticClass:\"canvasImage\"},[_c('canvas',{ref:\"canvas\",staticClass:\"canvas\",attrs:{\"width\":_vm.getCanvasWidth,\"height\":_vm.getCanvasHeight}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._t(\"default\",null,{\"context\":_vm.data})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <slot :context=\"data\"></slot>\n  </div>\n</template>\n<script>\nimport * as _ from \"lodash\";\n\nconst _ContextStore = () => {\n  let callbacks = [];\n  let data = {};\n\n  const subscribe = () => {\n    _.each(callbacks, callback => {\n      callback(data);\n    });\n  };\n\n  const getContext = callback => {\n    callbacks.push(callback);\n    if (Object.keys(data).length > 0) {\n      subscribe();\n    }\n  };\n\n  const setContext = (keyName, params) => {\n    data[keyName] = params;\n    subscribe();\n  };\n\n  return {\n    subscribe,\n    getContext,\n    setContext\n  };\n};\nexport const ContextStore = _ContextStore();\n\nexport default {\n  data: () => {\n    return {\n      data: {},\n      get: ContextStore.getContext.bind(this)\n    };\n  },\n  props: {\n    contextKey: {\n      type: Array\n    }\n  },\n  watch: {\n    contextKey: {\n      immediate: true,\n      handler(newValue) {\n        _.map(newValue, key => {\n          this.data = { [key]: null };\n        });\n      }\n    }\n  },\n  mounted() {\n    ContextStore.getContext(value => {\n      _.map(this.contextKey, key => {\n        if (_.has(value, key)) {\n          let _data = { ...this.data };\n          // _data[key] = _.cloneDeep(value[key]);\n          _data[key] = { ...value[key] };\n          this.data = _data;\n        }\n      });\n    });\n  }\n};\n</script>\n<style lang=\"scss\">\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Context.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Context.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Context.vue?vue&type=template&id=235c54db&\"\nimport script from \"./Context.vue?vue&type=script&lang=js&\"\nexport * from \"./Context.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import * as _ from \"lodash\";\nimport { ContextStore } from \"../context/Context\";\n\nconst _scroller = () => {\n  let callbacks = [];\n  let _document = document.getElementsByTagName(\"body\")[0];\n  let height = _document.getBoundingClientRect().height;\n  let scrollTop = 0;\n\n  document.addEventListener(\"scroll\", () => {\n    // console.log(\"scrolling\", document.scrollingElement);\n    const top = document.scrollingElement.scrollTop;\n    const params = { top };\n\n    //contextで受け取り\n    ContextStore.setContext(\"SCROLL\", params);\n\n    //コールバック\n    _.map(callbacks, callback => {\n      callback(params);\n    });\n  });\n\n  const setHeight = n => {\n    height += n;\n    _document.style.height = height + \"px\";\n  };\n\n  const getScroll = callback => {\n    callbacks.push(callback);\n  };\n\n  const enable = n => {\n    height += n;\n    _document.style.height = height + \"px\";\n    if (scrollTop) {\n      window.scrollTo({\n        top: scrollTop,\n        behavior: \"smooth\"\n      });\n    }\n  };\n\n  const disable = () => {\n    // console.log(document.scrollingElement.scrollTop);\n    scrollTop = document.scrollingElement.scrollTop;\n    _document.style.height = \"auto\";\n  };\n\n  return {\n    setHeight,\n    getScroll,\n    disable,\n    enable\n  };\n};\n\nexport const scroller = _scroller();\n","import * as _ from \"lodash\";\nimport { scroller } from \"../interection/scroll\";\n\nexport const eventProvider = (events, callback, scrollCallback) => {\n  let prevValue = 0;\n  //イベントを実行\n  const delivereEvent = _param => {\n    //イベントを検索\n    const _events = _.filter(events, event => {\n      return event.from <= _param.top && event.to > _param.top;\n    });\n\n    //イベントを受け取る\n    _.map(_events, event => {\n      if (event) {\n        const value = _param.top - event.from;\n        //登録イベントを実行\n        const diff = prevValue - value;\n        const param = { top: _param.top, value: value, diff };\n        // console.log(\"scroll =\", _param.top, value, diff);\n        callback(event, param);\n        prevValue = value;\n      }\n    });\n  };\n\n  //初期値\n  delivereEvent({ top: 1 });\n\n  //スクロールを受け取る\n  scroller.getScroll(_param => {\n    if (scrollCallback) {\n      scrollCallback();\n    }\n    delivereEvent(_param);\n  });\n};\n","import * as _ from \"lodash\";\n\nexport const drawImage = () => {\n  let ctx;\n  let src;\n  let dst;\n  let rect;\n  let forceRelease = false; //\b強制停止\n  let THRESHOLD;\n\n  const init = (_ctx, src_ctx, _rect, _THRESHOLD) => {\n    ctx = _ctx;\n    rect = _rect;\n    forceRelease = false;\n    THRESHOLD = _THRESHOLD;\n  };\n\n  const getImage = path => {\n    return new Promise(resolved => {\n      const image = new Image();\n      image.onload = () => {\n        resolved(image);\n      };\n      image.src = path;\n    });\n  };\n\n  const set = async ({ path }) => {\n    const image = await getImage(path);\n    ctx.clearRect(0, 0, rect.width, rect.height);\n    ctx.save();\n    ctx.drawImage(image, 0, 0, rect.width, rect.height);\n    ctx.restore();\n  };\n\n  const setTile = async ({ path, tile, rotate }) => {\n    const image = await getImage(path);\n    const _width = rect.width / tile.x;\n    const _height = rect.height / tile.y;\n    //main\n    ctx.clearRect(0, 0, rect.width, rect.height);\n    ctx.save();\n    for (let y = 0; y < tile.y; y++) {\n      for (let x = 0; x < tile.x; x++) {\n        ctx.drawImage(image, _width * x, _height * y, _width, _height);\n      }\n    }\n    ctx.restore();\n  };\n\n  return {\n    init,\n    set,\n    setTile\n  };\n};\n","import * as _ from \"lodash\";\n\nexport const colorNoise = ({ isColor }) => {\n  let ctx;\n  let src;\n  let dst;\n  let rect;\n  let forceRelease = false; //\b強制停止\n  let endFlag = false; //終了フラグ\n  let THRESHOLD;\n  let isColorNoise = isColor;\n\n  const init = (_ctx, src_ctx, _rect, _THRESHOLD) => {\n    ctx = _ctx;\n    src = src_ctx.getImageData(0, 0, _rect.width, _rect.height);\n    dst = ctx.createImageData(_rect.width, _rect.height);\n    rect = _rect;\n    forceRelease = false;\n    THRESHOLD = _THRESHOLD;\n  };\n\n  const setColor = (z, i, _rgb) => {\n    if (z < 255) {\n      dst.data[i] = _rgb.r;\n      dst.data[i + 1] = _rgb.g;\n      dst.data[i + 2] = _rgb.b;\n    } else {\n      dst.data[i] = src.data[i];\n      dst.data[i + 1] = src.data[i + 1];\n      dst.data[i + 2] = src.data[i + 2];\n    }\n    dst.data[i + 3] = src.data[i + 3];\n  };\n\n  const getNoise = _isColor => {\n    if (_isColor) {\n      return {\n        r: Math.floor(Math.random() * 250),\n        g: Math.floor(Math.random() * 250),\n        b: Math.floor(Math.random() * 250)\n      };\n    } else {\n      const col = Math.floor(Math.random() * 250);\n      return {\n        r: col,\n        g: col,\n        b: col\n      };\n    }\n  };\n\n  const scroll = ({ value, from, to }) => {\n    const rate = rect.height / (to - from);\n    const draw = () => {\n      if (forceRelease) {\n        return true;\n      }\n      if (from < rect.height && top >= rect.height) {\n        if (!endFlag) {\n          release();\n        }\n        return;\n      }\n      for (let y = 0; y < rect.height; y++) {\n        for (let x = 0; x < rect.width; x++) {\n          const i = Math.floor(y * (rect.width * 4) + x * 4);\n          let z = (src.data[i] + src.data[i + 1] + src.data[i + 2]) / 3;\n\n          if (y < value * rate) {\n            const _rgb = getNoise(isColorNoise);\n            setColor(z, i, _rgb);\n          } else {\n            const _rgb = {\n              r: 10,\n              g: 10,\n              b: 10\n            };\n            setColor(z, i, _rgb);\n          }\n        }\n      }\n      ctx.putImageData(dst, rect.x, rect.y);\n    };\n    draw();\n  };\n\n  const loop = ({ value, from, to }) => {\n    const rate = rect.height / (to - from);\n    const draw = () => {\n      if (forceRelease) {\n        return true;\n      }\n      if (from < rect.height && top >= rect.height) {\n        return;\n      }\n      for (let y = 0; y < rect.height; y++) {\n        for (let x = 0; x < rect.width; x++) {\n          const i = Math.floor(y * (rect.width * 4) + x * 4);\n          let z = (src.data[i] + src.data[i + 1] + src.data[i + 2]) / 3;\n          const _rgb = getNoise(isColorNoise);\n          setColor(z, i, _rgb);\n        }\n      }\n      ctx.putImageData(dst, rect.x, rect.y);\n    };\n    draw();\n  };\n\n  const set = () => {\n    init();\n    for (let i = 0; i < src.data.length; i += 4) {\n      let z = (src.data[i] + src.data[i + 1] + src.data[i + 2]) / 3;\n      setColor(z, i, { r: 255, g: 128, b: 0 });\n    }\n    ctx.putImageData(dst, rect.x, rect.y);\n  };\n\n  const release = b => {\n    console.log(\"release\", b);\n    forceRelease = b;\n    src = null;\n    dst = null;\n  };\n\n  return {\n    init,\n    set,\n    loop,\n    scroll,\n    release\n  };\n};\n","import * as _ from \"lodash\";\n\nexport const Color = () => {\n  let ctx;\n  let src;\n  let dst;\n  let rect;\n  let forceRelease = false; //\b強制停止\n  let endFlag = false; //終了フラグ\n  let THRESHOLD;\n\n  const init = (_ctx, src_ctx, _rect, _THRESHOLD) => {\n    ctx = _ctx;\n    src = src_ctx.getImageData(0, 0, _rect.width, _rect.height);\n    dst = ctx.createImageData(_rect.width, _rect.height);\n    rect = _rect;\n    forceRelease = false;\n    THRESHOLD = _THRESHOLD;\n  };\n\n  const setColor = (z, i, _rgb) => {\n    if (z < 255) {\n      dst.data[i] = _rgb.r;\n      dst.data[i + 1] = _rgb.g;\n      dst.data[i + 2] = _rgb.b;\n    } else {\n      dst.data[i] = src.data[i];\n      dst.data[i + 1] = src.data[i + 1];\n      dst.data[i + 2] = src.data[i + 2];\n    }\n    dst.data[i + 3] = src.data[i + 3];\n  };\n\n  const scroll = ({ value, from, to, frgb, trgb }) => {\n    const rate = rect.height / (to - from);\n    const draw = () => {\n      if (forceRelease) {\n        return true;\n      }\n      if (from < rect.height && top >= rect.height) {\n        if (!endFlag) {\n          release();\n        }\n        return;\n      }\n      for (let y = 0; y < rect.height; y++) {\n        for (let x = 0; x < rect.width; x++) {\n          const i = Math.floor(y * (rect.width * 4) + x * 4);\n          let z = (src.data[i] + src.data[i + 1] + src.data[i + 2]) / 3;\n\n          if (y < value * rate) {\n            setColor(z, i, frgb);\n          } else {\n            const _rgb = {\n              r: 10,\n              g: 10,\n              b: 10\n            };\n            setColor(z, i, _rgb);\n          }\n        }\n      }\n      ctx.putImageData(dst, rect.x, rect.y);\n    };\n    draw();\n  };\n\n  const reverse = ({ value, from, to, frgb, trgb }) => {\n    const rate = rect.height / (to - from);\n    const draw = () => {\n      if (forceRelease) {\n        return true;\n      }\n      if (from < rect.height && top >= rect.height) {\n        if (!endFlag) {\n          release();\n        }\n        return;\n      }\n      for (let y = 0; y < rect.height; y++) {\n        for (let x = 0; x < rect.width; x++) {\n          const i = Math.floor(y * (rect.width * 4) + x * 4);\n          let z = (src.data[i] + src.data[i + 1] + src.data[i + 2]) / 3;\n\n          if (y > value * rate) {\n            setColor(z, i, frgb);\n          } else {\n            const _rgb = {\n              r: 10,\n              g: 10,\n              b: 10\n            };\n            setColor(z, i, _rgb);\n          }\n        }\n      }\n      ctx.putImageData(dst, rect.x, rect.y);\n    };\n    draw();\n  };\n\n  const loop = ({ value, from, to, rgb }) => {\n    const rate = rect.height / (to - from);\n    const draw = () => {\n      if (forceRelease) {\n        return true;\n      }\n      if (from < rect.height && top >= rect.height) {\n        return;\n      }\n      for (let y = 0; y < rect.height; y++) {\n        for (let x = 0; x < rect.width; x++) {\n          const i = Math.floor(y * (rect.width * 4) + x * 4);\n          let z = (src.data[i] + src.data[i + 1] + src.data[i + 2]) / 3;\n          setColor(z, i, rgb);\n        }\n      }\n      ctx.putImageData(dst, rect.x, rect.y);\n    };\n    draw();\n  };\n\n  const release = b => {\n    console.log(\"release\", b);\n    forceRelease = b;\n    src = null;\n    dst = null;\n  };\n\n  return {\n    init,\n    loop,\n    scroll,\n    reverse,\n    release\n  };\n};\n","import * as _ from \"lodash\";\n\n/**\n * ピクセル拡散エフェクト\n * @param {*} param0\n */\nexport const PixelSkewed = ({ isColor }) => {\n  let ctx;\n  let src;\n  let dst;\n  let rect;\n  let forceRelease = false; //\b強制停止\n  let pixels = [];\n  let THRESHOLD;\n  let isColorNoise = isColor;\n\n  const init = (_ctx, src_ctx, _rect, _THRESHOLD) => {\n    ctx = _ctx;\n    src = src_ctx.getImageData(0, 0, _rect.width, _rect.height);\n    dst = ctx.createImageData(_rect.width, _rect.height);\n    rect = _rect;\n    forceRelease = false;\n    THRESHOLD = _THRESHOLD;\n\n    //ピクセルを取り込む\n    for (let y = 0; y < rect.height; y++) {\n      for (let x = 0; x < rect.width; x++) {\n        const i = Math.floor(y * (rect.width * 4) + x * 4);\n        let z = (src.data[i] + src.data[i + 1] + src.data[i + 2]) / 3;\n        if (z < THRESHOLD) {\n          const rr = Math.floor(Math.random() * 360); //回転初期値\n          const r = Math.random() * 1 + 1; //半径初期値\n          const s = Math.random() * 2; //回転速度初期値\n          const a = src.data[i + 3];\n          const rgb = getNoise(isColorNoise);\n          pixels.push({ index: i, x, y, rr, r, s, a, rgb });\n        }\n      }\n    }\n  };\n  const scroll = ({ value, from, to }) => {\n    clearCanvas();\n    const draw = () => {\n      if (forceRelease) {\n        return true;\n      }\n      if (from < rect.height && top >= rect.height) {\n        return;\n      }\n\n      //座標計算\n      pixels.map(pix => {\n        const rotate = value * pix.s;\n        const radius = value / 5 + pix.r; //半径\n        const radian = ((pix.rr + rotate) * Math.PI) / 180;\n        const x = Math.floor(radius * Math.cos(radian)) + pix.x;\n        const y = Math.floor(radius * Math.sin(radian)) + pix.y;\n        //描画\n        const i = Math.floor(y * (rect.width * 4) + x * 4);\n        dst.data[i] = pix.rgb.r;\n        dst.data[i + 1] = pix.rgb.g;\n        dst.data[i + 2] = pix.rgb.b;\n        dst.data[i + 3] = pix.a;\n      });\n\n      ctx.putImageData(dst, rect.x, rect.y);\n    };\n    draw();\n  };\n\n  const clearCanvas = () => {\n    for (let y = 0; y < rect.height; y++) {\n      for (let x = 0; x < rect.width; x++) {\n        const i = Math.floor(y * (rect.width * 4) + x * 4);\n        dst.data[i] = 255;\n        dst.data[i + 1] = 255;\n        dst.data[i + 2] = 255;\n        dst.data[i + 3] = 0;\n      }\n    }\n  };\n\n  const getNoise = _isColor => {\n    if (_isColor) {\n      return {\n        r: Math.floor(Math.random() * 250),\n        g: Math.floor(Math.random() * 250),\n        b: Math.floor(Math.random() * 250)\n      };\n    } else {\n      return {\n        r: 0,\n        g: 0,\n        b: 0\n      };\n    }\n  };\n\n  return {\n    init,\n    scroll\n  };\n};\n","import * as _ from \"lodash\";\n\n/**\n * ピクセルを拡散して8時に回転\n */\nexport const PixelSkewed8 = ({ isColor }) => {\n  let ctx;\n  let src;\n  let dst;\n  let rect;\n  let forceRelease = false; //\b強制停止\n  let pixels = [];\n  let THRESHOLD;\n  let isColorNoise = isColor;\n\n  const init = (_ctx, src_ctx, _rect, _THRESHOLD) => {\n    ctx = _ctx;\n    src = src_ctx.getImageData(0, 0, _rect.width, _rect.height);\n    dst = ctx.createImageData(_rect.width, _rect.height);\n    rect = _rect;\n    forceRelease = false;\n    THRESHOLD = _THRESHOLD;\n\n    //ピクセルを取り込む\n    for (let y = 0; y < rect.height; y++) {\n      for (let x = 0; x < rect.width; x++) {\n        const i = Math.floor(y * (rect.width * 4) + x * 4);\n        let z = (src.data[i] + src.data[i + 1] + src.data[i + 2]) / 3;\n        if (z < THRESHOLD) {\n          // const rr = Math.floor(Math.random() * 360); //回転初期値\n          const rr = [90, 270][_.random(1)]; //回転初期値\n          const rx = Math.random() * 50; //半径初期値\n          const ry = Math.floor(Math.random() * 10); //y半径\n          const s = Math.random() * 2; //回転速度初期値\n          const a = src.data[i + 3];\n          const rgb = getNoise(isColorNoise);\n          pixels.push({ index: i, x, y, rr, rx, ry, s, a, rgb });\n        }\n      }\n    }\n  };\n\n  const scroll = ({ value, from, to, sp = 50 }) => {\n    clearCanvas();\n\n    let radius = 1;\n    const draw = () => {\n      if (forceRelease) {\n        return true;\n      }\n      if (from < rect.height && top >= rect.height) {\n        return;\n      }\n\n      //座標計算\n      pixels.map(pix => {\n        const rotate = value / sp;\n        const radius_x = pix.rx; //半径\n        const radius_y = pix.ry; //y半径\n        const radian = ((pix.rr + rotate) * Math.PI) / 180;\n        const x = Math.floor(radius_x * Math.cos(radian)) + pix.x;\n        const y = Math.floor(radius_y * Math.sin(radian + radian)) + pix.y;\n        //描画\n        const i = Math.floor(y * (rect.width * 4) + x * 4);\n        dst.data[i] = pix.rgb.r;\n        dst.data[i + 1] = pix.rgb.g;\n        dst.data[i + 2] = pix.rgb.b;\n        dst.data[i + 3] = pix.a;\n      });\n\n      ctx.putImageData(dst, rect.x, rect.y);\n    };\n    draw();\n  };\n\n  const clearCanvas = () => {\n    for (let y = 0; y < rect.height; y++) {\n      for (let x = 0; x < rect.width; x++) {\n        const i = Math.floor(y * (rect.width * 4) + x * 4);\n        dst.data[i] = 255;\n        dst.data[i + 1] = 255;\n        dst.data[i + 2] = 255;\n        dst.data[i + 3] = 0;\n      }\n    }\n  };\n\n  const getNoise = _isColor => {\n    if (_isColor) {\n      return {\n        r: Math.floor(Math.random() * 250),\n        g: Math.floor(Math.random() * 250),\n        b: Math.floor(Math.random() * 250)\n      };\n    } else {\n      return {\n        r: 0,\n        g: 0,\n        b: 0\n      };\n    }\n  };\n\n  return {\n    init,\n    scroll\n  };\n};\n","import * as _ from \"lodash\";\n\nexport const LineSkewed = ({ isRandom }) => {\n  let ctx;\n  let src;\n  let dst;\n  let rect;\n  let forceRelease = false; //\b強制停止\n  let pixels = [];\n  let THRESHOLD;\n  let isRandomNoise = isRandom;\n  let rands = [];\n\n  const init = (_ctx, src_ctx, _rect, _THRESHOLD) => {\n    ctx = _ctx;\n    src = src_ctx.getImageData(0, 0, _rect.width, _rect.height);\n    dst = ctx.createImageData(_rect.width, _rect.height);\n    rect = _rect;\n    forceRelease = false;\n    THRESHOLD = _THRESHOLD;\n  };\n\n  const clearCanvas = () => {\n    for (let y = 0; y < rect.height; y++) {\n      for (let x = 0; x < rect.width; x++) {\n        const i = Math.floor(y * (rect.width * 4) + x * 4);\n        dst.data[i] = 255;\n        dst.data[i + 1] = 255;\n        dst.data[i + 2] = 255;\n        dst.data[i + 3] = 0;\n      }\n    }\n  };\n\n  const drawPixel = (index, i) => {\n    dst.data[i] = 0;\n    dst.data[i + 1] = 0;\n    dst.data[i + 2] = 0;\n    dst.data[i + 3] = src.data[index - 1];\n  };\n\n  const prevPixel = i => {\n    return src.data[i - 1];\n    // return Math.floor(src.data[i - 4] + src.data[i - 3] + src.data[i - 2]) / 3;\n  };\n\n  const nextPixel = i => {\n    return src.data[i + 4];\n    // return Math.floor(src.data[i - 4] + src.data[i - 3] + src.data[i - 2]) / 3;\n  };\n\n  const scroll = ({ value, from, to }) => {\n    clearCanvas();\n    const draw = () => {\n      if (forceRelease) {\n        return true;\n      }\n      if (from < rect.height && top >= rect.height) {\n        return;\n      }\n\n      for (let y = 0; y < rect.height; y++) {\n        for (let x = 0; x < rect.width; x++) {\n          const i = Math.floor(y * (rect.width * 4) + x * 4);\n          let z = (src.data[i] + src.data[i + 1] + src.data[i + 2]) / 3;\n\n          //黒ピクセルの後の白ピクセル\n          if (src.data[i + 3] === 0 && prevPixel(i) > 0) {\n            // drawPixel(i, i);\n            //ランダム値\n            if (!rands[i]) {\n              rands[i] = isRandomNoise ? Math.floor(Math.random() * 4) : 1;\n            }\n            const s = i + Math.floor((value * rands[i]) / 10) * 4;\n            for (let n = i; n < s; n += 4) {\n              drawPixel(i, n);\n            }\n          } else {\n            //着色済みになければ\n            // let _z = (dst.data[i] + dst.data[i + 1] + dst.data[i + 2]) / 3;\n            // if (_z === 255) {\n            //   dst.data[i] = 1;\n            //   dst.data[i + 1] = 1;\n            //   dst.data[i + 2] = 1;\n            //   dst.data[i + 3] = src.data[i + 3];\n            // }\n          }\n        }\n\n        for (let x = rect.width; x > 0; x--) {\n          const i = Math.floor(y * (rect.width * 4) + x * 4);\n          let z = (src.data[i] + src.data[i + 1] + src.data[i + 2]) / 3;\n\n          //黒ピクセルの後の白ピクセル\n          if (src.data[i + 3] > 0 && nextPixel(i) === 0) {\n            // drawPixel(i, i);\n            //ランダム値\n            if (!rands[i]) {\n              rands[i] = isRandomNoise ? Math.floor(Math.random() * 10) : 1;\n            }\n            const s = i - Math.floor((value * rands[i]) / 10) * 4;\n            for (let n = s; n < i; n += 4) {\n              drawPixel(s, n);\n            }\n          } else {\n            //着色済みになければ\n            let _z = (dst.data[i] + dst.data[i + 1] + dst.data[i + 2]) / 3;\n            if (_z === 255) {\n              dst.data[i] = 1;\n              dst.data[i + 1] = 1;\n              dst.data[i + 2] = 1;\n              dst.data[i + 3] = src.data[i + 3];\n            }\n          }\n        }\n      }\n      ctx.putImageData(dst, rect.x, rect.y);\n    };\n    draw();\n  };\n\n  return {\n    init,\n    scroll\n  };\n};\n","import * as _ from \"lodash\";\n\nexport const LineWave = ({ isColor }) => {\n  let ctx;\n  let src;\n  let dst;\n  let rect;\n  let forceRelease = false; //\b強制停止\n  let pixels = [];\n  let THRESHOLD;\n  let isColorNoise = isColor;\n\n  const clearCanvas = () => {\n    for (let y = 0; y < rect.height; y++) {\n      for (let x = 0; x < rect.width; x++) {\n        const i = Math.floor(y * (rect.width * 4) + x * 4);\n        dst.data[i] = 255;\n        dst.data[i + 1] = 255;\n        dst.data[i + 2] = 255;\n        dst.data[i + 3] = 0;\n      }\n    }\n  };\n\n  const init = (_ctx, src_ctx, _rect, _THRESHOLD) => {\n    ctx = _ctx;\n    src = src_ctx.getImageData(0, 0, _rect.width, _rect.height);\n    dst = ctx.createImageData(_rect.width, _rect.height);\n    rect = _rect;\n    forceRelease = false;\n    THRESHOLD = _THRESHOLD;\n\n    //ピクセルを取り込む\n    for (let y = 0; y < rect.height; y++) {\n      const radius = _.random(10);\n      for (let x = 0; x < rect.width; x++) {\n        const i = Math.floor(y * (rect.width * 4) + x * 4);\n        let z = (src.data[i] + src.data[i + 1] + src.data[i + 2]) / 3;\n        if (z < THRESHOLD) {\n          const rr = 0; //回転初期値\n          const radian = (y * 4 * Math.PI) / 180;\n          const r = Math.floor(radius * Math.cos(radian));\n          //const r = Math.abs(rect.width / 2 - x); //半径\n          const s = 0.5; //回転速度初期値\n          const a = src.data[i + 3];\n          const rgb = { r: 0, g: 0, b: 0 };\n          pixels.push({ index: i, x, y, rr, r, s, a, rgb });\n        }\n      }\n    }\n  };\n\n  const scroll = ({ value, from, to }) => {\n    clearCanvas();\n    const draw = () => {\n      if (forceRelease) {\n        return true;\n      }\n      if (from < rect.height && top >= rect.height) {\n        return;\n      }\n\n      // //座標計算\n      pixels.map(pix => {\n        const rotate = Math.floor(value) + 90;\n        const radius = pix.r; //半径\n        const radian = (rotate * Math.PI) / 180;\n        const x = Math.floor(radius * Math.cos(radian)) + pix.x;\n        // const y = Math.floor(radius * Math.sin(radian)) + pix.y;\n        const y = pix.y;\n        //描画\n        const i = Math.floor(y * (rect.width * 4) + x * 4);\n        dst.data[i] = pix.rgb.r;\n        dst.data[i + 1] = pix.rgb.g;\n        dst.data[i + 2] = pix.rgb.b;\n        dst.data[i + 3] = pix.a;\n      });\n\n      ctx.putImageData(dst, rect.x, rect.y);\n    };\n    draw();\n  };\n\n  return {\n    init,\n    scroll\n  };\n};\n","import * as _ from \"lodash\";\n\nexport const Stay = () => {\n  let ctx;\n  let src;\n  let dst;\n  let rect;\n  let forceRelease = false; //\b強制停止\n  let endFlag = false; //終了フラグ\n  let THRESHOLD;\n\n  const init = (_ctx, src_ctx, _rect, _THRESHOLD) => {\n    ctx = _ctx;\n    src = src_ctx.getImageData(0, 0, _rect.width, _rect.height);\n    dst = ctx.createImageData(_rect.width, _rect.height);\n    rect = _rect;\n    forceRelease = false;\n    THRESHOLD = _THRESHOLD;\n  };\n\n  const set = () => {\n    for (let y = 0; y < rect.height; y++) {\n      for (let x = 0; x < rect.width; x++) {\n        const i = Math.floor(y * (rect.width * 4) + x * 4);\n        let z = (src.data[i] + src.data[i + 1] + src.data[i + 2]) / 3;\n        if (z < 255) {\n          dst.data[i] = src.data[i];\n          dst.data[i + 1] = src.data[i + 1];\n          dst.data[i + 2] = src.data[i + 2];\n          dst.data[i + 3] = src.data[i + 3];\n        }\n      }\n    }\n    ctx.putImageData(dst, rect.x, rect.y);\n  };\n\n  const release = b => {\n    console.log(\"release\", b);\n    forceRelease = b;\n    src = null;\n    dst = null;\n  };\n\n  return {\n    init,\n    set,\n    release\n  };\n};\n","export const setStyle = ({ elem, from, to, fromVal, toVal }) => {\n  const n = (toVal - fromVal) / (to - from);\n  const scale = ({ value }) => {\n    const s = n * value + fromVal;\n    elem.style.transform = `scale(${s})`;\n  };\n\n  const translateY = ({ value }) => {\n    const s = n * value + fromVal;\n    elem.style.transform = `translateY(${s}px)`;\n  };\n\n  const opacity = ({ value }) => {\n    const s = n * value + fromVal;\n    elem.style.opacity = s;\n  };\n\n  return {\n    scale,\n    translateY,\n    opacity\n  };\n};\n","import * as _ from \"lodash\";\nimport { eventProvider } from \"../../interection/eventProvider\";\n\n//ここからエフェクト\nimport { drawImage } from \"../Effecter/Effects/DrawImage\";\nimport { colorNoise } from \"../Effecter/Effects/ColorNoise\";\nimport { Color } from \"../Effecter/Effects/Color\";\nimport { PixelSkewed } from \"../Effecter/Effects/PixelSkewed\";\nimport { PixelSkewed8 } from \"../Effecter/Effects/PixelSkewed8\";\nimport { LineSkewed } from \"../Effecter/Effects/LineSkewed\";\nimport { LineWave } from \"../Effecter/Effects/LineWave\";\nimport { Stay } from \"../Effecter/Effects/Stay\";\n\n//スタイル系エフェクト\nimport { setStyle } from \"../Effecter/Effects/Style\";\n\nconst scale = Math.random(1) + 1;\n\n//エフェクタ作成\nconst dwImg = drawImage();\nconst pxlSkw = PixelSkewed({ isColor: false });\nconst pxlSkw8 = PixelSkewed8({ isColor: false });\nconst colNse = colorNoise({ isColor: false });\nconst col = Color();\nconst lnSkw = LineSkewed({ isRandom: true });\nconst lnWve = LineWave({ isColor: false });\nconst sty = Stay();\n\n/**\n * ここにスクロールイベントを登録していく\n */\nconst events = [\n  {\n    from: 100,\n    to: 200,\n    effect: ({ refs, top, value }) => {\n      col.scroll({\n        value,\n        from: 100,\n        to: 200,\n        frgb: { r: 0, g: 200, b: 255 }\n      });\n    }\n  },\n  {\n    from: 400,\n    to: 500,\n    effect: ({ refs, top, value }) => {\n      col.reverse({\n        value,\n        from: 400,\n        to: 500,\n        frgb: { r: 0, g: 200, b: 255 }\n      });\n    }\n  },\n  //ノイズスクロール\n  {\n    from: 700,\n    to: 1400,\n    effect: ({ refs, top, value }) => {\n      lnWve.scroll({\n        value,\n        from: 700,\n        to: 1400\n      });\n    }\n  },\n\n  //フェードアウト\n  {\n    from: 1400,\n    to: 1600,\n    effect: ({ refs, top, value }) => {\n      setStyle({\n        elem: refs.ref,\n        from: 1400,\n        to: 1600,\n        fromVal: 1,\n        toVal: 0\n      }).opacity({ value });\n    }\n  },\n  //フェードイン\n  {\n    from: 1600,\n    to: 1900,\n    effect: ({ refs, top, value }) => {\n      setStyle({\n        elem: refs.ref,\n        from: 1600,\n        to: 1900,\n        fromVal: 0,\n        toVal: 1\n      }).opacity({ value });\n    }\n  },\n  // ノイズライン\n  {\n    from: 1800,\n    to: 2400,\n    effect: ({ refs, top, value }) => {\n      lnSkw.scroll({\n        value,\n        from: 1800,\n        to: 2400\n      });\n    }\n  },\n  //固定\n  {\n    from: 2400,\n    to: 2600,\n    effect: ({ refs, top, value }) => {\n      sty.set({\n        value,\n        from: 2400,\n        to: 2600\n      });\n    }\n  },\n  //フェードアウト\n  {\n    from: 2200,\n    to: 2400,\n    effect: ({ refs, top, value }) => {\n      setStyle({\n        elem: refs.ref,\n        from: 2200,\n        to: 2400,\n        fromVal: 1,\n        toVal: 0\n      }).opacity({ value });\n    }\n  },\n  //フェードイン\n  {\n    from: 2400,\n    to: 2700,\n    effect: ({ refs, top, value }) => {\n      setStyle({\n        elem: refs.ref,\n        from: 2400,\n        to: 2700,\n        fromVal: 0,\n        toVal: 1\n      }).opacity({ value });\n    }\n  },\n  //スクロール\n  // {\n  //   from: 200,\n  //   to: 3000,\n  //   effect: ({ refs, top, value }) => {\n  //     setStyle({\n  //       elem: refs.ref,\n  //       from: 200,\n  //       to: 3000,\n  //       fromVal: 0,\n  //       toVal: -100\n  //     }).translateY({ value });\n  //   }\n  // },\n  //固定\n  {\n    from: 3000,\n    to: 3200,\n    effect: ({ refs, top, value }) => {\n      sty.set({\n        value,\n        from: 3000,\n        to: 3200\n      });\n    }\n  },\n  //ノイズ拡散８のじ\n  {\n    from: 3200,\n    to: 4500,\n    effect: ({ refs, top, value }) => {\n      pxlSkw8.scroll({\n        value,\n        from: 3200,\n        to: 4500,\n        sp: 20\n      });\n    }\n  },\n  //ノイズ拡散\n  {\n    from: 4500,\n    to: 6000,\n    effect: ({ refs, top, value }) => {\n      pxlSkw.scroll({\n        value,\n        from: 4500,\n        to: 6000\n      });\n    }\n  },\n  //フェードアウト\n  {\n    from: 5000,\n    to: 6000,\n    effect: ({ refs, top, value }) => {\n      setStyle({\n        elem: refs.ref,\n        from: 5000,\n        to: 6000,\n        fromVal: 1.0,\n        toVal: 0\n      }).opacity({ value });\n    }\n  }\n];\n\nexport const CanvasEffect = ref => {\n  let ctx = ref.getContext(\"2d\");\n  let rect = ref.getBoundingClientRect();\n  let dst = null;\n\n  //エフェクタ初期化\n  const eff = {\n    ref,\n    ctx,\n    rect,\n    dst\n  };\n\n  //エフェエクトの初期化\n  dwImg.init(ctx, ctx, rect, 128);\n  colNse.init(ctx, ctx, rect, 128);\n  col.init(ctx, ctx, rect, 128);\n  pxlSkw.init(ctx, ctx, rect, 128);\n  pxlSkw8.init(ctx, ctx, rect, 128);\n  lnSkw.init(ctx, ctx, rect, 128);\n  lnWve.init(ctx, ctx, rect, 128);\n  sty.init(ctx, ctx, rect, 128);\n\n  eventProvider(events, (event, { top, value }) => {\n    const param = {\n      top,\n      value,\n      refs: eff\n    };\n    event.effect(param);\n  });\n};\n","// import * as _ from 'lodash';\nconst fitRect = (elmRect, imgRect) => {\n  const rate = elmRect.width / imgRect.width;\n  return {\n    x: 0,\n    y: 0,\n    width: imgRect.width * rate,\n    height: imgRect.height * rate\n  };\n};\n\nconst getImage = (frame, path) => {\n  return new Promise(resolved => {\n    const img = new Image();\n    img.onload = () => {\n      const elmRect = frame.getBoundingClientRect();\n      const imgRect = { left: 0, top: 0, width: img.width, height: img.height };\n      const _fitRect = fitRect(elmRect, imgRect);\n      resolved({\n        fit: _fitRect,\n        img: img\n      });\n    };\n    img.src = path;\n  });\n};\n\nexport { getImage };\n","<template>\n  <div ref=\"frame\" class=\"canvasImage\">\n    <canvas class=\"canvas\" ref=\"canvas\" :width=\"getCanvasWidth\" :height=\"getCanvasHeight\"></canvas>\n  </div>\n</template>\n<script>\nimport * as _ from \"lodash\";\nimport { CanvasEffect } from \"../AnimationController/CanvasEffect\";\nimport { getImage } from \"../../util/canvasUtil\";\nimport { gcd } from \"../../util/gcd\";\n\nconst config = {\n  rotate: 0\n};\n\nexport default {\n  data: () => {\n    return {\n      imageData: null,\n      canvasData: { width: 300, height: 300 },\n      edge: 300\n    };\n  },\n\n  props: {\n    src: String\n  },\n\n  async mounted() {\n    this.init();\n    await this.resizeCanvas();\n    this.setTile(300, () => {\n      CanvasEffect(this.$refs.canvas);\n    });\n  },\n\n  methods: {\n    init() {\n      let timer;\n      window.addEventListener(\"resize\", () => {\n        clearTimeout(timer);\n        timer = setTimeout(() => {}, 300);\n      });\n    },\n\n    resizeCanvas() {\n      return new Promise(async resolved => {\n        this.imageData = await getImage(this.$refs.frame, this.src);\n\n        //canvasのサイズを変更\n        let size = _.cloneDeep(this.canvasData);\n        size.width = window.innerWidth;\n        size.height = window.innerHeight;\n        this.canvasData = size;\n\n        resolved();\n      });\n    },\n\n    async setTile(edge, callback) {\n      this.imageData = await getImage(this.$refs.frame, this.src);\n\n      this.$nextTick(() => {\n        const _width = edge;\n        const _height = edge;\n\n        const _left = this.$refs.canvas.width / 2 - _width / 2;\n        const _top = this.$refs.canvas.height / 2 - _height / 2;\n\n        //main\n        const ctx = this.$refs.canvas.getContext(\"2d\");\n        ctx.clearRect(0, 0, this.$refs.canvas.width, this.$refs.canvas.height);\n        ctx.save();\n        ctx.drawImage(this.imageData.img, _left, _top, _width, _height);\n        ctx.restore();\n        callback();\n      });\n    }\n  },\n\n  computed: {\n    getCanvasWidth() {\n      return this.canvasData.width + \"px\";\n    },\n    getCanvasHeight() {\n      return this.canvasData.height + \"px\";\n    }\n  }\n};\n</script>\n<style lang=\"scss\" scoped>\n.canvasImage {\n  position: absolute;\n  width: 100vw;\n  height: 100vh;\n  z-index: 1;\n  canvas {\n    display: block;\n    position: absolute;\n    left: 0;\n    top: 0;\n  }\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CanvasEffectView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CanvasEffectView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CanvasEffectView.vue?vue&type=template&id=75d94856&scoped=true&\"\nimport script from \"./CanvasEffectView.vue?vue&type=script&lang=js&\"\nexport * from \"./CanvasEffectView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CanvasEffectView.vue?vue&type=style&index=0&id=75d94856&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"75d94856\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"frame\",staticClass:\"canvasText\"},[_vm._l((_vm.txts),function(txt){return _c('CanvasTextLayer',{key:txt.id,staticClass:\"ref-text\",attrs:{\"item\":txt,\"canvasData\":_vm.canvasData},on:{\"setCanvasRef\":_vm.setCanvasRef}})}),_vm._l((_vm.imgs),function(img){return _c('CanvasImageLayer',{key:img.id,staticClass:\"ref-image\",attrs:{\"item\":img,\"canvasData\":_vm.canvasData},on:{\"setCanvasRef\":_vm.setCanvasImageRef}})})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export const pixelRatio = 1;\n// export const pixelRatio = window.devicePixelRatio;\n","import * as _ from \"lodash\";\nimport { pixelRatio } from \"@/config\";\nexport const Stay = (\n  ref,\n  srcRef,\n  event,\n  { top, value, diff, scrollY, drawRect }\n) => {\n  const ctxSrc = srcRef.getContext(\"2d\");\n  const rect = srcRef.getBoundingClientRect();\n  rect.width = rect.width * pixelRatio;\n  rect.height = rect.height * pixelRatio;\n  const src = ctxSrc.getImageData(\n    drawRect.x,\n    drawRect.y,\n    drawRect.width,\n    drawRect.height\n  );\n  ctxSrc.putImageData(src, drawRect.x, drawRect.y + scrollY);\n  const ctx = ref.getContext(\"2d\");\n  ctx.drawImage(\n    srcRef,\n    0,\n    0,\n    rect.width,\n    rect.height,\n    0,\n    0,\n    rect.width,\n    rect.height\n  );\n\n  // const src = ctxSrc.getImageData(0, 0, rect.width, rect.height);\n  // let dst = ctxSrc.createImageData(rect.width, rect.height);\n\n  // //コピー\n  // for (let y = 0; y < rect.height; y++) {\n  //   for (let x = 0; x < rect.width; x++) {\n  //     const i = Math.floor(y * (rect.width * 4) + x * 4);\n  //     const _y = Math.floor((y + scrollY) * (rect.width * 4) + x * 4);\n  //     dst.data[_y] = src.data[i];\n  //     dst.data[_y + 1] = src.data[i + 1];\n  //     dst.data[_y + 2] = src.data[i + 2];\n  //     dst.data[_y + 3] = src.data[i + 3];\n  //   }\n  // }\n\n  // ctxSrc.putImageData(dst, rect.x, rect.y);\n  // const ctx = ref.getContext(\"2d\");\n  // ctx.drawImage(\n  //   srcRef,\n  //   0,\n  //   0,\n  //   rect.width,\n  //   rect.height,\n  //   0,\n  //   0,\n  //   rect.width,\n  //   rect.height\n  // );\n};\n","import * as _ from \"lodash\";\nimport { pixelRatio } from \"@/config\";\nexport const SkewedRight = (\n  ref,\n  srcRef,\n  event,\n  { top, value, diff, scrollY, drawRect }\n) => {\n  // console.log(\n  //   \"skewdRight value\",\n  //   \"スクロール総量\",\n  //   top,\n  //   \"スクロール量\",\n  //   value,\n  //   diff\n  // );\n\n  const ctxSrc = srcRef.getContext(\"2d\");\n  const rect = srcRef.getBoundingClientRect();\n  rect.width = rect.width * pixelRatio;\n  rect.height = rect.height * pixelRatio;\n  const src = ctxSrc.getImageData(0, 0, rect.width, rect.height);\n  let dst = ctxSrc.createImageData(rect.width, rect.height);\n\n  //コピー\n  for (let y = 0; y < rect.height; y++) {\n    for (let x = 0; x < rect.width; x++) {\n      const i = Math.floor(y * (rect.width * 4) + x * 4);\n      dst.data[i] = src.data[i];\n      dst.data[i + 1] = src.data[i + 1];\n      dst.data[i + 2] = src.data[i + 2];\n      dst.data[i + 3] = src.data[i + 3];\n    }\n  }\n\n  //1pxスクロールあたりの進行ピクセル数\n  // const pixRate = +(rect.width / (event.to - event.from)).toFixed(2);\n  const pixRate = +(drawRect.width / (event.to - event.from)).toFixed(2);\n  let col = [];\n  for (let y = 0; y < rect.height; y++) {\n    for (let x = 0; x < rect.width; x++) {\n      const i = Math.floor(y * (rect.width * 4) + x * 4);\n      const _y = Math.floor((y + scrollY) * (rect.width * 4) + x * 4);\n      if (x < drawRect.x + value * pixRate) {\n        dst.data[_y] = src.data[i];\n        dst.data[_y + 1] = src.data[i + 1];\n        dst.data[_y + 2] = src.data[i + 2];\n        dst.data[_y + 3] = src.data[i + 3];\n        col[y] = {\n          r: src.data[i],\n          g: src.data[i + 1],\n          b: src.data[i + 2],\n          a: src.data[i + 3]\n        };\n      } else {\n        dst.data[_y] = col[y].r;\n        dst.data[_y + 1] = col[y].g;\n        dst.data[_y + 2] = col[y].b;\n        dst.data[_y + 3] = col[y].a;\n      }\n    }\n  }\n\n  ctxSrc.putImageData(dst, rect.x, rect.y);\n  const ctx = ref.getContext(\"2d\");\n  ctx.drawImage(\n    srcRef,\n    0,\n    0,\n    rect.width,\n    rect.height,\n    0,\n    0,\n    rect.width,\n    rect.height\n  );\n\n  //描画範囲を可視化\n  // ctx.strokeStyle = \"blue\";\n  // ctx.strokeRect(\n  //   drawRect.x,\n  //   drawRect.y + scrollY,\n  //   drawRect.width,\n  //   drawRect.height\n  // );\n};\n","import * as _ from \"lodash\";\nimport { pixelRatio } from \"@/config\";\nexport const SkewedLeft = (ref, srcRef, event, { top, value, diff }) => {\n  const ctxSrc = srcRef.getContext(\"2d\");\n  const rect = srcRef.getBoundingClientRect();\n  rect.width = rect.width * pixelRatio;\n  rect.height = rect.height * pixelRatio;\n  const src = ctxSrc.getImageData(0, 0, rect.width, rect.height);\n  let dst = ctxSrc.createImageData(rect.width, rect.height);\n\n  //コピー\n  for (let y = 0; y < rect.height; y++) {\n    for (let x = 0; x < rect.width; x++) {\n      const i = Math.floor(y * (rect.width * 4) + x * 4);\n      dst.data[i] = src.data[i];\n      dst.data[i + 1] = src.data[i + 1];\n      dst.data[i + 2] = src.data[i + 2];\n      dst.data[i + 3] = src.data[i + 3];\n    }\n  }\n\n  let last = [];\n\n  let col = [];\n  for (let y = 0; y < rect.height; y++) {\n    for (let x = rect.width; x > 0; x--) {\n      const i = Math.floor(y * (rect.width * 4) + x * 4);\n      if (x > rect.width - value * 0.5) {\n        dst.data[i] = src.data[i];\n        dst.data[i + 1] = src.data[i + 1];\n        dst.data[i + 2] = src.data[i + 2];\n        dst.data[i + 3] = src.data[i + 3];\n        col[y] = {\n          r: src.data[i],\n          g: src.data[i + 1],\n          b: src.data[i + 2],\n          a: src.data[i + 3]\n        };\n      } else {\n        dst.data[i] = col[y].r;\n        dst.data[i + 1] = col[y].g;\n        dst.data[i + 2] = col[y].b;\n        dst.data[i + 3] = col[y].a;\n      }\n    }\n  }\n\n  ctxSrc.putImageData(dst, rect.x, rect.y);\n  const ctx = ref.getContext(\"2d\");\n  ctx.drawImage(\n    srcRef,\n    0,\n    0,\n    rect.width,\n    rect.height,\n    0,\n    0,\n    rect.width,\n    rect.height\n  );\n};\n","import * as _ from \"lodash\";\nimport { pixelRatio } from \"@/config\";\nexport const SkewedLeftReverse = (ref, srcRef, event, { top, value, diff }) => {\n  const ctxSrc = srcRef.getContext(\"2d\");\n  const rect = srcRef.getBoundingClientRect();\n  rect.width = rect.width * pixelRatio;\n  rect.height = rect.height * pixelRatio;\n  const src = ctxSrc.getImageData(0, 0, rect.width, rect.height);\n  let dst = ctxSrc.createImageData(rect.width, rect.height);\n\n  //コピー\n  for (let y = 0; y < rect.height; y++) {\n    for (let x = 0; x < rect.width; x++) {\n      const i = Math.floor(y * (rect.width * 4) + x * 4);\n      dst.data[i] = src.data[i];\n      dst.data[i + 1] = src.data[i + 1];\n      dst.data[i + 2] = src.data[i + 2];\n      dst.data[i + 3] = src.data[i + 3];\n    }\n  }\n\n  let last = [];\n\n  let col = [];\n  for (let y = 0; y < rect.height; y++) {\n    for (let x = rect.width; x > 0; x--) {\n      const i = Math.floor(y * (rect.width * 4) + x * 4);\n      if (x > rect.width - value * 0.5) {\n        dst.data[i] = src.data[i];\n        dst.data[i + 1] = src.data[i + 1];\n        dst.data[i + 2] = src.data[i + 2];\n        dst.data[i + 3] = src.data[i + 3];\n        col[y] = {\n          r: src.data[i],\n          g: src.data[i + 1],\n          b: src.data[i + 2],\n          a: src.data[i + 3]\n        };\n        last[y] = { index: i, x, y };\n      } else {\n        dst.data[i] = col[y].r;\n        dst.data[i + 1] = col[y].g;\n        dst.data[i + 2] = col[y].b;\n        dst.data[i + 3] = col[y].a;\n      }\n    }\n  }\n\n  for (let y = 0; y < rect.height; y++) {\n    for (let x = 0; x < rect.width; x++) {\n      const i = Math.floor(y * (rect.width * 4) + x * 4);\n      if (last[y].x < x) {\n        dst.data[i] = col[y].r;\n        dst.data[i + 1] = col[y].g;\n        dst.data[i + 2] = col[y].b;\n        dst.data[i + 3] = col[y].a;\n      } else {\n        dst.data[i] = src.data[i];\n        dst.data[i + 1] = src.data[i + 1];\n        dst.data[i + 2] = src.data[i + 2];\n        dst.data[i + 3] = src.data[i + 3];\n      }\n    }\n  }\n\n  ctxSrc.putImageData(dst, rect.x, rect.y);\n  const ctx = ref.getContext(\"2d\");\n  ctx.drawImage(\n    srcRef,\n    0,\n    0,\n    rect.width,\n    rect.height,\n    0,\n    0,\n    rect.width,\n    rect.height\n  );\n};\n","import * as _ from \"lodash\";\nimport { pixelRatio } from \"@/config\";\nexport const SkewedRightReverse = (\n  ref,\n  srcRef,\n  event,\n  { top, value, diff, scrollY, drawRect }\n) => {\n  const ctxSrc = srcRef.getContext(\"2d\");\n  const rect = srcRef.getBoundingClientRect();\n  rect.width = rect.width * pixelRatio;\n  rect.height = rect.height * pixelRatio;\n  const src = ctxSrc.getImageData(0, 0, rect.width, rect.height);\n  let dst = ctxSrc.createImageData(rect.width, rect.height);\n\n  //コピー\n  for (let y = 0; y < rect.height; y++) {\n    for (let x = 0; x < rect.width; x++) {\n      const i = Math.floor(y * (rect.width * 4) + x * 4);\n      dst.data[i] = src.data[i];\n      dst.data[i + 1] = src.data[i + 1];\n      dst.data[i + 2] = src.data[i + 2];\n      dst.data[i + 3] = src.data[i + 3];\n    }\n  }\n\n  //1pxスクロールあたりの進行ピクセル数\n  // const pixRate = +(rect.width / (event.to - event.from)).toFixed(2);\n  const pixRate = +(drawRect.width / (event.to - event.from)).toFixed(2);\n  let last = [];\n  let col = [];\n  for (let y = 0; y < rect.height; y++) {\n    for (let x = rect.width; x > 0; x--) {\n      const i = Math.floor(y * (rect.width * 4) + x * 4);\n      const edge_index = Math.floor(\n        rect.width - Math.floor(drawRect.x + value * pixRate)\n      );\n      if (x === edge_index) {\n        col[y] = {\n          r: src.data[i],\n          g: src.data[i + 1],\n          b: src.data[i + 2],\n          a: src.data[i + 3]\n        };\n        last[y] = { index: i, x, y };\n      }\n    }\n  }\n\n  for (let y = 0; y < rect.height; y++) {\n    for (let x = 0; x < rect.width; x++) {\n      const i = Math.floor(y * (rect.width * 4) + x * 4);\n      const _y = Math.floor((y + scrollY) * (rect.width * 4) + x * 4);\n      if (last[y] && x >= last[y].x) {\n        dst.data[_y] = col[y].r;\n        dst.data[_y + 1] = col[y].g;\n        dst.data[_y + 2] = col[y].b;\n        dst.data[_y + 3] = col[y].a;\n      } else {\n        dst.data[_y] = src.data[i];\n        dst.data[_y + 1] = src.data[i + 1];\n        dst.data[_y + 2] = src.data[i + 2];\n        dst.data[_y + 3] = src.data[i + 3];\n      }\n    }\n  }\n\n  ctxSrc.putImageData(dst, rect.x, rect.y);\n  const ctx = ref.getContext(\"2d\");\n  ctx.drawImage(\n    srcRef,\n    0,\n    0,\n    rect.width,\n    rect.height,\n    0,\n    0,\n    rect.width,\n    rect.height\n  );\n\n  //描画範囲を可視化\n  // ctx.strokeStyle = \"blue\";\n  // ctx.strokeRect(\n  //   drawRect.x,\n  //   drawRect.y + scrollY,\n  //   drawRect.width,\n  //   drawRect.height\n  // );\n};\n","import * as _ from \"lodash\";\nimport { pixelRatio } from \"@/config\";\n\nlet pixels = [];\nlet rect = null;\nlet dst = null;\nlet ctxSrc = null;\nlet THRESHOLD = 128;\n\nexport const PixelNoise = (ref, srcRef, event, { top, value, diff }) => {\n  if (pixels.length === 0) {\n    ctxSrc = srcRef.getContext(\"2d\");\n    rect = srcRef.getBoundingClientRect();\n    rect.width = rect.width * pixelRatio;\n    rect.height = rect.height * pixelRatio;\n    const src = ctxSrc.getImageData(0, 0, rect.width, rect.height);\n    dst = ctxSrc.createImageData(rect.width, rect.height);\n\n    for (let y = 0; y < rect.height; y++) {\n      for (let x = 0; x < rect.width; x++) {\n        const i = Math.floor(y * (rect.width * 4) + x * 4);\n        let z = (src.data[i] + src.data[i + 1] + src.data[i + 2]) / 3;\n        const rr = Math.floor(Math.random() * 360); //回転初期値\n        const r = Math.random() * 1 + 1; //半径初期値\n        const s = Math.random() * 2; //回転速度初期値\n\n        //コピー\n        dst.data[i] = src.data[i];\n        dst.data[i + 1] = src.data[i + 1];\n        dst.data[i + 2] = src.data[i + 2];\n        dst.data[i + 3] = src.data[i + 3];\n\n        if (z < THRESHOLD) {\n          const a = src.data[i + 3];\n          //設定する色\n          const rgb = {\n            r: 0,\n            g: 0,\n            b: 0\n          };\n          pixels.push({ index: i, x, y, rr, r, s, a, rgb });\n        }\n      }\n    }\n  }\n\n  //1pxスクロールあたりの進行ピクセル数\n  // const pixRate = +(rect.width / (event.to - event.from)).toFixed(2);\n  // let col = [];\n\n  console.log(\"pixelNoise\", pixels.length);\n  pixels.map(pix => {\n    const rotate = value * pix.s;\n    const radius = value / 5 + pix.r; //半径\n    const radian = ((pix.rr + rotate) * Math.PI) / 180;\n    const x = Math.floor(radius * Math.cos(radian)) + pix.x;\n    const y = Math.floor(radius * Math.sin(radian)) + pix.y;\n    //描画\n    const i = Math.floor(y * (rect.width * 4) + x * 4);\n    dst.data[i] = pix.rgb.r;\n    dst.data[i + 1] = pix.rgb.g;\n    dst.data[i + 2] = pix.rgb.b;\n    dst.data[i + 3] = pix.a;\n  });\n\n  ctxSrc.putImageData(dst, rect.x, rect.y);\n  const ctx = ref.getContext(\"2d\");\n  ctx.drawImage(\n    srcRef,\n    0,\n    0,\n    rect.width,\n    rect.height,\n    0,\n    0,\n    rect.width,\n    rect.height\n  );\n};\n","const store = () => {\n  let list = {};\n\n  const set = (key, value) => {\n    list[key] = value;\n  };\n\n  const get = key => {\n    return list[key];\n  };\n\n  return {\n    set,\n    get\n  };\n};\n\nexport const textStore = store();\nexport const effectStore = store();\nexport const imageStore = store();\n","import * as _ from \"lodash\";\n\nconst clickEvent = () => {\n  let callbacks = [];\n  let hovers = [];\n\n  const start = e => {\n    const point = { x: e.pageX, y: e.pageY };\n  };\n\n  const move = e => {\n    const point = { x: e.pageX, y: e.pageY };\n    _.map(hovers, callback => {\n      // console.log(\"hover\", point);\n      const isHit = getRectHit(callback.rect, point);\n      if (isHit) {\n        callback.callback(true);\n        return;\n      } else {\n        callback.callback(false);\n      }\n    });\n  };\n\n  const end = e => {\n    const point = { x: e.pageX, y: e.pageY };\n    _.map(callbacks, callback => {\n      // console.log(\n      //   \"click\",\n      //   callback.rect,\n      //   point,\n      //   document.scrollingElement.scrollTop\n      // );\n      const isHit = getRectHit(callback.rect, point);\n      if (isHit) {\n        callback.callback(true);\n        return;\n      } else {\n        callback.callback(false);\n      }\n    });\n  };\n\n  const init = () => {\n    console.log(\"events init\");\n    window.addEventListener(\"mousedown\", start);\n    window.addEventListener(\"touchstart\", start);\n    window.addEventListener(\"mousemove\", move);\n    window.addEventListener(\"touchmove\", move);\n    window.addEventListener(\"mouseup\", end);\n    window.addEventListener(\"touchend\", end);\n  };\n\n  const setCallback = ({ id, rect, callback }) => {\n    const isCallback = _.find(callbacks, callback => {\n      return callback.id === id;\n    });\n    if (!isCallback) {\n      console.log(\"setCallback\", id);\n      callbacks.push({ id, rect, callback });\n    }\n  };\n\n  const setHover = ({ id, rect, callback }) => {\n    const isCallback = _.find(hovers, callback => {\n      return callback.id === id;\n    });\n    if (!isCallback) {\n      console.log(\"setHover\", id);\n      hovers.push({ id, rect, callback });\n    }\n  };\n\n  const removeCallback = id => {\n    _.remove(callbacks, callback => {\n      return callback.id === id;\n    });\n  };\n\n  const getRectHit = (rect, point) => {\n    //pointのy軸からスクロール量を減算する\n    const scrollTop = document.scrollingElement.scrollTop;\n    if (\n      rect.x < point.x &&\n      rect.y < point.y - scrollTop &&\n      rect.y + rect.height > point.y - scrollTop &&\n      rect.x + rect.width > point.x\n    ) {\n      // console.log(\"area\", rect, point, true);\n      return true;\n    }\n    // console.log(\"area\", rect, point, false);\n    return false;\n  };\n\n  return {\n    init,\n    setCallback,\n    setHover,\n    removeCallback\n  };\n};\n\nexport const Events = clickEvent();\nEvents.init();\n","/*\n * シーケンスデータを受け取って、\n * テキストを生成、スクロールを検知して、\n * エフェクトを指示\n */\nimport * as _ from \"lodash\";\nimport { pixelRatio } from \"@/config\";\nimport { eventProvider } from \"../../interection/eventProvider\";\nimport * as eff from \"../Effecter/Eff/Functions\";\nimport { textStore } from \"../../util/store\";\nimport { Events } from \"../../util/events\";\n\nconst FillText = () => {\n  let canvas;\n  let imageData = null;\n  let textRect = {};\n  let drawRect = {};\n\n  const init = ref => {\n    canvas = ref;\n  };\n  const setText = (\n    text,\n    { fontFamily, fontSize, color, align, moveTo, letterSpacing },\n    { top, value, diff },\n    maxWidth\n  ) => {\n    canvas.style.letterSpacing = letterSpacing;\n    const ctx = canvas.getContext(\"2d\");\n    ctx.font = `${fontSize}px '${fontFamily}'`;\n    ctx.fillStyle = color;\n    ctx.textAlign = align;\n    const _x =\n      align === \"center\" ? Math.floor((maxWidth - moveTo.x) / 2) : moveTo.x;\n\n    //複数業を描画\n    const canvasRect = canvas.getBoundingClientRect();\n    textRect = {\n      x: canvasRect.width,\n      y: 0,\n      width: 0,\n      height: 0\n    };\n    _.map(text, (item, index) => {\n      const _y = moveTo.y - fontSize * 1.5 * index;\n      const _maxwidth = maxWidth ? maxWidth - moveTo.x : null;\n      ctx.fillText(\n        _.isFunction(item) ? item({ top, value, diff }) : item,\n        _x,\n        _y,\n        _maxwidth\n      );\n\n      //テキスト描画範囲を取得/最小限の描画領域\n      textRect.x = moveTo.x;\n      textRect.y = moveTo.y - fontSize * 1.5 * (index + 1);\n      textRect.width = _maxwidth > textRect.width ? _maxwidth : textRect.width;\n      textRect.height = fontSize * 1.5 * (index + 1) + fontSize;\n    });\n\n    //imageData に保持\n    const rect = canvas.getBoundingClientRect();\n    rect.width = rect.width * pixelRatio;\n    rect.height = rect.height * pixelRatio;\n    imageData = ctx.getImageData(\n      textRect.x,\n      textRect.y,\n      textRect.width,\n      textRect.height\n    );\n\n    //両端を検出\n    let positionX = { min: textRect.width, max: 0 };\n\n    for (let y = 0; y < textRect.height; y++) {\n      for (let x = 0; x < textRect.width; x++) {\n        const i = Math.floor(y * (textRect.width * 4) + x * 4);\n        const col =\n          (imageData.data[i] + imageData.data[i + 1] + imageData.data[i + 2]) /\n          3;\n        if (imageData.data[i + 3] >= 1 && col < 128) {\n          positionX.min = x < positionX.min ? x : positionX.min;\n          positionX.max = x > positionX.max ? x : positionX.max;\n        }\n      }\n    }\n\n    //最小限の描画範囲\n    drawRect = {\n      x: positionX.min,\n      y: textRect.y,\n      width: positionX.max - positionX.min,\n      height: textRect.height\n    };\n\n    //文字範囲を作成\n    // ctx.strokeStyle = \"blue\";\n    // ctx.strokeRect(drawRect.x, drawRect.y, drawRect.width, drawRect.height);\n    console.log(\"positionX\", drawRect);\n  };\n\n  //再描画\n  const redraw = ref => {\n    const ctx = ref.getContext(\"2d\");\n    ctx.clearRect(0, 0, ref.width, ref.height);\n    ctx.putImageData(imageData, textRect.x, textRect.y);\n  };\n\n  //描画範囲の指定\n  const getDrawRect = () => {\n    return drawRect;\n  };\n\n  return {\n    init,\n    setText,\n    redraw,\n    getDrawRect\n  };\n};\n\nexport const CanvasText = (ref, srcRef, events, maxWidth) => {\n  let moveUpdated = {\n    x: 0,\n    y: 0\n  };\n\n  //計算用canvas\n  const ctxSrc = srcRef.getContext(\"2d\");\n  const ctx = ref.getContext(\"2d\");\n\n  //イベントに登録して、コールバックうける\n  eventProvider(\n    _.cloneDeep(events),\n    //表示するイベントが返ってくる\n    (event, { top, value, diff }) => {\n      //スクロール量を計算\n      const moveperscroll =\n        (event.moveFrom.y - event.moveTo.y) / Math.abs(event.to - event.from);\n      moveUpdated.y += diff * moveperscroll;\n\n      //文字データをキャッシュ\n      let text;\n      if (!textStore.get(event.id)) {\n        //テキストをキャンバスに描画\n        text = FillText();\n        text.init(srcRef);\n        const style = _.cloneDeep(event.style);\n        style.moveTo = {\n          x: event.moveTo.x,\n          y: event.moveFrom.y\n        };\n        const _text = _.cloneDeep(event.text).reverse();\n        text.setText(_text, style, { top, value, diff }, maxWidth);\n        textStore.set(event.id, text);\n      } else {\n        text = textStore.get(event.id);\n        text.redraw(srcRef);\n      }\n\n      //文字のスクロール表現はdomではなくキャンバス内の座標を変更して行う\n      const scrollY = Math.floor(moveUpdated.y);\n      const drawRect = text.getDrawRect();\n\n      // ctx.strokeStyle = \"blue\";\n      // ctx.strokeRect(drawRect.x, drawRect.y, drawRect.width, drawRect.height);\n\n      //マウスイベントをここで設定\n      const eventRect = {\n        x: drawRect.x,\n        y: drawRect.y + scrollY,\n        width: drawRect.width,\n        height: drawRect.height\n      };\n\n      //リンクイベント\n\n      if (event.link) {\n        //hoverを検知\n        Events.setHover({\n          id: event.id,\n          rect: eventRect,\n          callback: status => {\n            if (status) {\n              ref.classList.add(\"hover\");\n              console.log(\"hover\", event.id, status);\n            } else {\n              ref.classList.remove(\"hover\");\n            }\n          }\n        });\n\n        //クリックを検知\n        Events.setCallback({\n          id: event.id,\n          rect: eventRect,\n          callback: status => {\n            console.log(\"event\", event.id, status);\n          }\n        });\n\n        //リンク枠\n        ctx.strokeStyle = \"blue\";\n        ctx.strokeRect(\n          eventRect.x,\n          eventRect.y,\n          eventRect.width,\n          eventRect.height\n        );\n      }\n\n      //ここでエフェクト\n      if (event.eff && event.eff.length) {\n        _.map(event.eff, effect => {\n          eff[effect](ref, srcRef, event, {\n            top,\n            value,\n            diff,\n            scrollY,\n            drawRect\n          });\n          //STAY時にクリックイベントを入れる場合\n        });\n      }\n    },\n    //スクロールごとにコールバック\n    () => {\n      //スクロールごとに毎回全画面を消す\n      ctxSrc.clearRect(0, 0, srcRef.width, srcRef.height);\n      ctx.clearRect(0, 0, ref.width, ref.height);\n    }\n  );\n};\n","import * as _ from \"lodash\";\nconst imageCache = () => {\n  let images = [];\n  const format = {\n    url: null,\n    date: null,\n    image: null\n  };\n\n  const loadImage = url => {\n    return new Promise(resolved => {\n      const _img = new Image();\n      _img.onload = () => {\n        resolved(_img);\n      };\n      _img.src = url;\n    });\n  };\n\n  const get = url => {\n    return new Promise(async resolved => {\n      const image = _.find(images, item => {\n        return item.url === url;\n      });\n      if (image) {\n        resolved(image.image);\n      } else {\n        const newimage = await loadImage(url);\n        images.push({\n          url,\n          date: new Date(),\n          image: newimage\n        });\n        resolved(newimage);\n      }\n    });\n  };\n\n  return {\n    get\n  };\n};\n\nconst cache = imageCache();\n\n/*\n * 画像のロード\n */\nexport const imageLoader = url => {\n  return new Promise(async resolved => {\n    resolved(await cache.get(url));\n  });\n};\n","/*\n * シーケンスデータを受け取って、\n * テキストを生成、スクロールを検知して、\n * エフェクトを指示\n */\nimport * as _ from \"lodash\";\nimport { eventProvider } from \"../../interection/eventProvider\";\nimport * as eff from \"../Effecter/Eff/Functions\";\nimport { imageLoader } from \"../../util/imageLoader\";\nimport { imageStore } from \"../../util/store\";\n\nconst POSITION = {\n  LEFT: \"left\",\n  CENTER: \"center\",\n  RIGHT: \"right\"\n};\n\nconst FillImage = () => {\n  let canvas;\n  let drawRect;\n  let imageData;\n\n  const init = ref => {\n    canvas = ref;\n  };\n  const setImage = (\n    imageObj,\n    { x, y, width, height, moveTo },\n    { top, value, diff },\n    maxWidth\n  ) => {\n    const src = { x: 0, y: 0, width: imageObj.width, height: imageObj.height };\n    let visible = { x, y, width, height };\n\n    //レイアウトの調整\n    if (height === \"auto\") {\n      visible.height = Math.floor(imageObj.height * (width / imageObj.width));\n    }\n    if (x === \"auto\") {\n      visible.x = Math.floor(canvas.width / 2) - Math.floor(width / 2);\n    }\n    if (y === \"auto\") {\n      visible.y =\n        Math.floor(canvas.height / 2) - Math.floor(visible.height / 2);\n    }\n    if (moveTo.x) {\n      visible.x = moveTo.x;\n    }\n    if (moveTo.y) {\n      visible.y = moveTo.y;\n    }\n\n    drawRect = {\n      x: visible.x,\n      y: visible.y,\n      width: visible.width,\n      height: visible.height\n    };\n\n    const ctx = canvas.getContext(\"2d\");\n    ctx.drawImage(\n      imageObj,\n      src.x,\n      src.y,\n      src.width,\n      src.height,\n      visible.x,\n      visible.y,\n      visible.width,\n      visible.height\n    );\n\n    //imageData に保持\n    imageData = ctx.getImageData(\n      drawRect.x,\n      drawRect.y,\n      drawRect.width,\n      drawRect.height\n    );\n  };\n\n  //再描画\n  const redraw = ref => {\n    const ctx = ref.getContext(\"2d\");\n    ctx.clearRect(0, 0, ref.width, ref.height);\n    ctx.putImageData(imageData, drawRect.x, drawRect.y);\n  };\n\n  //描画範囲の指定\n  const getDrawRect = () => {\n    return drawRect;\n  };\n\n  return {\n    init,\n    setImage,\n    redraw,\n    getDrawRect\n  };\n};\n\nexport const CanvasImage = (ref, srcRef, events, maxWidth) => {\n  let moveUpdated = {\n    x: 0,\n    y: 0\n  };\n\n  //計算用canvas\n  const ctxSrc = srcRef.getContext(\"2d\");\n  const ctx = ref.getContext(\"2d\");\n\n  //イベントに登録して、コールバックうける\n  eventProvider(\n    events,\n    //表示するイベントが返ってくる\n    async (event, { top, value, diff }) => {\n      //スクロール量を計算\n      const moveperscroll =\n        (event.moveFrom.y - event.moveTo.y) / Math.abs(event.to - event.from);\n      moveUpdated.y += diff * moveperscroll;\n\n      //画像データをキャッシュ\n      let img;\n      if (!imageStore.get(event.id)) {\n        //画像をキャンバスに描画\n        img = FillImage();\n        img.init(srcRef);\n        let style = _.cloneDeep(event.rect);\n        style.moveTo = {\n          x: event.moveTo.x,\n          y: event.moveFrom.y\n        };\n\n        //ここでキャンバスに絵を描画\n        const imageObj = await imageLoader(event.img);\n        img.setImage(imageObj, style, { top, value, diff }, maxWidth);\n        imageStore.set(event.id, img);\n      } else {\n        img = imageStore.get(event.id);\n        img.redraw(srcRef);\n      }\n\n      //文字のスクロール表現はdomではなくキャンバス内の座標を変更して行う\n      const scrollY = Math.floor(moveUpdated.y);\n      const drawRect = img.getDrawRect();\n\n      // ctx.strokeStyle = \"red\";\n      // ctx.strokeRect(drawRect.x, drawRect.y, drawRect.width, drawRect.height);\n\n      //ここでエフェクト\n      if (event.eff && event.eff.length) {\n        _.map(event.eff, effect => {\n          eff[effect](ref, srcRef, event, {\n            top,\n            value,\n            diff,\n            scrollY,\n            drawRect\n          });\n        });\n      }\n    },\n    //スクロールごとにコールバック\n    () => {\n      //スクロールごとに毎回全画面を消す\n      ctxSrc.clearRect(0, 0, srcRef.width, srcRef.height);\n      ctx.clearRect(0, 0, ref.width, ref.height);\n    }\n  );\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('canvas',{ref:\"src\",staticClass:\"canvas src\",attrs:{\"width\":_vm.canvasData.width + 'px',\"height\":_vm.canvasData.height + 'px'}}),_c('canvas',{ref:\"canvas\",staticClass:\"canvas\",attrs:{\"width\":_vm.canvasData.width + 'px',\"height\":_vm.canvasData.height + 'px'}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <!-- 描画する元のキャンバス -->\n    <canvas\n      class=\"canvas src\"\n      ref=\"src\"\n      :width=\"canvasData.width + 'px'\"\n      :height=\"canvasData.height + 'px'\"\n    />\n    <!-- エフェクト描画用のキャンバス -->\n    <canvas\n      class=\"canvas\"\n      ref=\"canvas\"\n      :width=\"canvasData.width + 'px'\"\n      :height=\"canvasData.height + 'px'\"\n    />\n  </div>\n</template>\n<script>\nimport { pixelRatio } from \"@/config\";\nexport default {\n  data: () => {\n    return {\n      refsFlag: false //ref登録済み\n    };\n  },\n  props: {\n    canvasData: {\n      type: Object,\n      default: () => {\n        return { width: 0, height: 0 };\n      }\n    },\n    item: {\n      type: Object\n    }\n  },\n  mounted() {},\n  methods: {\n    init() {},\n    setCanvasRef() {\n      if (\n        this.item.id &&\n        this.$refs.canvas &&\n        this.$refs.src &&\n        !this.refsFlag\n      ) {\n        this.$emit(\"setCanvasRef\", {\n          id: this.item.id,\n          ref: this.$refs.canvas,\n          srcRef: this.$refs.src\n        });\n        this.refsFlag = true;\n      }\n    }\n  },\n  watch: {\n    item: {\n      immediate: true,\n      handler(newValue) {\n        this.$nextTick(() => {\n          this.setCanvasRef();\n        });\n      }\n    },\n    canvasData: {\n      immediate: true,\n      handler(newValue) {\n        this.$nextTick(() => {\n          this.$refs.canvas.style.width = `${newValue.width / pixelRatio}px`;\n          this.$refs.canvas.style.height = `${newValue.height / pixelRatio}px`;\n          this.$refs.src.style.width = `${newValue.width / pixelRatio}px`;\n          this.$refs.src.style.height = `${newValue.height / pixelRatio}px`;\n        });\n      }\n    },\n    $refs: {\n      immediate: true,\n      handler(newValue) {\n        this.$nextTick(() => {\n          this.setCanvasRef();\n        });\n      }\n    }\n  }\n};\n</script>\n<style lang=\"scss\" scoped>\ncanvas {\n  display: block;\n  position: absolute;\n  left: 0;\n  top: 0;\n  mix-blend-mode: difference;\n  visibility: visible;\n  transition: transform 0.1s ease-in;\n  &.hover {\n    cursor: pointer;\n    transform: scale(1.02);\n  }\n}\n.src {\n  visibility: hidden;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CanvasLayer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CanvasLayer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CanvasLayer.vue?vue&type=template&id=19d42ae0&scoped=true&\"\nimport script from \"./CanvasLayer.vue?vue&type=script&lang=js&\"\nexport * from \"./CanvasLayer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CanvasLayer.vue?vue&type=style&index=0&id=19d42ae0&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"19d42ae0\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div ref=\"frame\" class=\"canvasText\">\n    <!-- 描画キャンバス -->\n    <CanvasTextLayer\n      v-for=\"txt in txts\"\n      :key=\"txt.id\"\n      :item=\"txt\"\n      :canvasData=\"canvasData\"\n      class=\"ref-text\"\n      @setCanvasRef=\"setCanvasRef\"\n    />\n    <CanvasImageLayer\n      v-for=\"img in imgs\"\n      :key=\"img.id\"\n      :item=\"img\"\n      :canvasData=\"canvasData\"\n      class=\"ref-image\"\n      @setCanvasRef=\"setCanvasImageRef\"\n    />\n  </div>\n</template>\n<script>\nimport * as _ from \"lodash\";\nimport { pixelRatio } from \"@/config\";\nimport { scroller } from \"../../interection/scroll\";\nimport { CanvasText } from \"../AnimationController/CanvasText\";\nimport { CanvasImage } from \"../AnimationController/CanvasImage\";\nimport CanvasTextLayer from \"./CanvasLayer\";\nimport CanvasImageLayer from \"./CanvasLayer\";\n\nexport default {\n  data: () => {\n    return {\n      canvasRef: [],\n      srcRef: [],\n      canvasData: { width: 0, height: 0 }\n    };\n  },\n  components: {\n    CanvasTextLayer,\n    CanvasImageLayer\n  },\n  async mounted() {\n    this.init();\n    await this.resizeCanvas();\n  },\n  props: {\n    txts: {\n      type: Array\n    },\n    imgs: {\n      type: Array,\n      default: () => {\n        return [];\n      }\n    }\n  },\n  methods: {\n    init() {\n      let timer;\n      window.addEventListener(\"resize\", () => {\n        clearTimeout(timer);\n        timer = setTimeout(() => {}, 300);\n      });\n    },\n    setCanvasRef({ id, ref, srcRef }) {\n      // console.log(\"CanvasText\", ref, srcRef);\n      if (id && ref && srcRef) {\n        this.canvasRef[id] = ref;\n        this.srcRef[id] = srcRef;\n\n        const txt = _.filter(this.txts, txt => {\n          return txt.id === id;\n        });\n\n        // console.log(\"txt\", id, txt);\n        //キャンバスに文字を描画\n        if (txt && txt.length) {\n          CanvasText(\n            this.canvasRef[id],\n            this.srcRef[id],\n            txt,\n            this.canvasData.width\n          );\n        }\n      }\n    },\n    setCanvasImageRef({ id, ref, srcRef }) {\n      // console.log(\"CanvasText\", ref, srcRef);\n      if (id && ref && srcRef) {\n        this.canvasRef[id] = ref;\n        this.srcRef[id] = srcRef;\n\n        const img = _.filter(this.imgs, img => {\n          return img.id === id;\n        });\n        console.log(\"img\", id, img);\n        if (img && img.length) {\n          CanvasImage(\n            this.canvasRef[id],\n            this.srcRef[id],\n            img,\n            this.canvasData.width\n          );\n        }\n      }\n    },\n    resizeCanvas() {\n      return new Promise(async resolved => {\n        //canvasのサイズを変更\n        let size = _.cloneDeep(this.canvasData);\n        size.width = window.innerWidth * pixelRatio;\n        size.height = window.innerHeight * pixelRatio;\n        this.canvasData = size;\n        resolved();\n      });\n    }\n  }\n};\n</script>\n<style lang=\"scss\" scoped>\n.canvasText {\n  position: absolute;\n  width: 100vw;\n  height: 100vh;\n  z-index: 1;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CanvasTextView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CanvasTextView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CanvasTextView.vue?vue&type=template&id=242ec87b&scoped=true&\"\nimport script from \"./CanvasTextView.vue?vue&type=script&lang=js&\"\nexport * from \"./CanvasTextView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CanvasTextView.vue?vue&type=style&index=0&id=242ec87b&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"242ec87b\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"htmlview-transition\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.show),expression:\"show\"}],attrs:{\"id\":\"htmlView\"}},[_c('div',{attrs:{\"id\":\"page\"}},[_vm._v(\"HTML VIEW\")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <transition name=\"htmlview-transition\">\n    <div id=\"htmlView\" v-show=\"show\">\n      <div id=\"page\">HTML VIEW</div>\n    </div>\n  </transition>\n</template>\n<script>\nexport default {\n  data: () => {\n    return {};\n  },\n  props: {\n    show: {\n      type: Boolean\n    }\n  }\n};\n</script>\n<style lang=\"scss\" scoped>\n#htmlView {\n  position: fixed;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n\n  #page {\n    width: 100%;\n    height: 100%;\n    background-color: black;\n    color: white;\n    text-align: center;\n  }\n}\n\n.htmlview-transition-enter-active {\n  animation: fadeIn 0.3s;\n  animation-delay: 0.3s;\n  opacity: 0;\n}\n\n@keyframes fadeIn {\n  from {\n    transform: translateY(-100px);\n    //filter: blur(10px);\n    filter: grayscale(100%);\n    opacity: 0;\n  }\n  to {\n    transform: translateY(0);\n    //filter: blur(0);\n    filter: grayscale(0);\n    opacity: 1;\n  }\n}\n\n.htmlview-transition-leave-active {\n  animation: fadeOut 0.3s;\n}\n\n@keyframes fadeOut {\n  from {\n    transform: translateY(0);\n    //filter: blur(0);\n    filter: grayscale(0);\n  }\n  to {\n    transform: translateY(100px);\n    //filter: blur(10px);\n    filter: grayscale(100%);\n    opacity: 0;\n  }\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HtmlView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HtmlView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./HtmlView.vue?vue&type=template&id=0fb3c0e8&scoped=true&\"\nimport script from \"./HtmlView.vue?vue&type=script&lang=js&\"\nexport * from \"./HtmlView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./HtmlView.vue?vue&type=style&index=0&id=0fb3c0e8&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0fb3c0e8\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"bg\",style:(_vm.getStyle),attrs:{\"id\":\"bg\"}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export const diff = (val1, val2) => {\n  return JSON.stringify(val1) === JSON.stringify(val2);\n};\n","<template>\n  <div id=\"bg\" ref=\"bg\" :style=\"getStyle\" />\n</template>\n<script>\nimport { diff } from \"../../util/diff\";\n\nexport default {\n  data: () => {\n    return {\n      style: \"\",\n      canvasData: {}\n    };\n  },\n  props: {\n    color: {\n      type: Object,\n      default: () => {\n        return {};\n      }\n    }\n  },\n  mounted() {},\n  watch: {\n    color: {\n      immediate: true,\n      handler(newValue, oldValue) {\n        if (!diff(newValue, oldValue)) {\n          this.setBackgroundColor(newValue);\n          this.getSize();\n        }\n      }\n    }\n  },\n  methods: {\n    setBackgroundColor(value) {\n      if (this.$refs.bg) {\n        const rect = this.$refs.bg.getBoundingClientRect();\n        this.style = `background-color:rgb(${value.r},${value.g},${value.b});`;\n      }\n    },\n    getSize() {\n      if (this.$refs.bg) {\n        const rect = this.$refs.bg.getBoundingClientRect();\n        this.canvasData = {\n          width: rect.width,\n          height: rect.height\n        };\n      }\n    }\n  },\n  computed: {\n    getStyle() {\n      return this.style;\n    },\n    getCanvasWidth() {\n      return this.canvasData.width + \"px\";\n    },\n    getCanvasHeight() {\n      return this.canvasData.height + \"px\";\n    }\n  }\n};\n</script>\n<style lang=\"scss\">\n#bg {\n  position: fixed;\n  z-index: -1;\n  width: 100vw;\n  height: 100vh;\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BackgroundImage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BackgroundImage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BackgroundImage.vue?vue&type=template&id=f96bc85c&\"\nimport script from \"./BackgroundImage.vue?vue&type=script&lang=js&\"\nexport * from \"./BackgroundImage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./BackgroundImage.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import * as _ from \"lodash\";\nimport { scroller } from \"./interection/scroll\";\nimport { ContextStore } from \"./context/Context\";\n\nexport const HTML_VIEW_TYPE = {\n  TEXT: \"text\",\n  IMG: \"img\"\n};\n\nconst defaultValue = {\n  color: \"#333\",\n  fontFamily: \"'Roboto', sans-serif\",\n  textAlign: \"center\"\n};\n\nconst events = [\n  //タイリング\n  {\n    from: 1,\n    to: 600,\n    html: {\n      view: HTML_VIEW_TYPE.TEXT,\n      text: \"BACKHAM\",\n      style: {\n        fontSize: \"24px\",\n        color: defaultValue.color,\n        fontFamily: defaultValue.fontFamily,\n        textAlign: defaultValue.textAlign\n      }\n    }\n  },\n  {\n    from: 800,\n    to: 1200,\n    html: {\n      view: HTML_VIEW_TYPE.TEXT,\n      text: \"DESIGN\",\n      style: {\n        fontSize: \"120px\",\n        color: defaultValue.color,\n        fontFamily: defaultValue.fontFamily,\n        textAlign: defaultValue.textAlign\n      }\n    }\n  },\n  {\n    from: 1400,\n    to: 1800,\n    html: {\n      view: HTML_VIEW_TYPE.TEXT,\n      text: \"UI\",\n      style: {\n        fontSize: \"120px\",\n        color: defaultValue.color,\n        fontFamily: defaultValue.fontFamily,\n        textAlign: defaultValue.textAlign\n      }\n    }\n  },\n  {\n    from: 3000,\n    to: 4000,\n    html: {\n      view: HTML_VIEW_TYPE.TEXT,\n      text: \"backham\",\n      style: {\n        fontSize: \"26px\",\n        color: defaultValue.color,\n        fontFamily: defaultValue.fontFamily,\n        textAlign: defaultValue.textAlign\n      }\n    }\n  }\n];\n\nexport const HtmlSeq = () => {\n  //イベントを実行\n  const delivereEvent = _param => {\n    //イベントを検索\n    const _events = _.filter(events, event => {\n      return event.from <= _param.top && event.to > _param.top;\n    });\n\n    //イベントを受け取る\n    let params = [];\n    _.map(_events, event => {\n      if (event) {\n        //登録イベントを実行\n        const param = _.cloneDeep(event.html);\n        param.scroll = _param.top - event.from;\n        params.push(param);\n      }\n    });\n    ContextStore.setContext(\"HTML_VIEW\", params);\n  };\n\n  //初期値\n  delivereEvent({ top: 1 });\n  //スクロールを受け取る\n  scroller.getScroll(_param => {\n    delivereEvent(_param);\n  });\n};\n","<template>\n  <div id=\"app\">\n    <ContextConsumer :contextKey=\"['BGCOLOR']\" v-slot=\"{ context }\">\n      <BackgroundImage :color=\"bgcolor\" />\n    </ContextConsumer>\n    <!-- <CanvasEffectView :src=\"img\" @setCanvasRef=\"setCanvasRef\" /> -->\n    <CanvasTextView v-show=\"!isHtmlView\" :txts=\"txts\" :imgs=\"imgs\" />\n    <HtmlView :show=\"isHtmlView\" />\n    <div class=\"navi\">\n      <button @click=\"showHtmlView\">info</button>\n    </div>\n  </div>\n</template>\n<script>\nimport * as _ from \"lodash\";\nimport CanvasEffectView from \"./components/CanvasView/CanvasEffectView\";\nimport CanvasTextView from \"./components/CanvasView/CanvasTextView\";\nimport HtmlView from \"./components/HtmlView/HtmlView\";\nimport BackgroundImage from \"./components/CanvasView/BackgroundImage\";\nimport ContextConsumer from \"./context/Context\";\nimport { scroller } from \"./interection/scroll\";\nimport { HtmlSeq } from \"./HtmlSeq\";\n\nconst STYLES = {\n  DEFAULT: {\n    fontFamily: \"robot\",\n    fontSize: 48,\n    color: \"black\",\n    align: \"center\",\n    letterSpacing: \"4px\"\n  }\n};\n\nconst getNowTime = () => {\n  const now = new Date();\n  return `${now.getUTCDate()}.${now.getUTCMonth()}.${now.getUTCFullYear()}.${now.getUTCHours()}.${now.getUTCMinutes()}.${now.getUTCSeconds()}.${now.getUTCMilliseconds()}`;\n};\n\nconst getCenterY = () => {\n  return window.innerHeight / 2 - 23;\n};\n\nconst getRandomId = () => {\n  return _.random(9999999999) + _.uniq();\n};\n\nconst CONTENTS_TYPE = {\n  TEXT: \"text\",\n  IMAGE: \"image\"\n};\n\nconst CONTENTS = {\n  OPEN1: {\n    type: CONTENTS_TYPE.TEXT,\n    value: [\"AR/AI\"],\n    link: null,\n    style: STYLES.DEFAULT\n  },\n  OPEN2: {\n    type: CONTENTS_TYPE.TEXT,\n    value: [\"Design &\", \"Implement\"],\n    link: null,\n    style: STYLES.DEFAULT\n  },\n  OPEN3: {\n    type: CONTENTS_TYPE.TEXT,\n    value: [\"BACKHAM\"],\n    link: null,\n    style: _.assign(STYLES.DEFAULT, { fontSize: 48 })\n  }\n};\n\nconst MOVES = {\n  CENTER: {\n    FADEIN: {\n      TO: { x: 0, y: getCenterY() + 10 },\n      FROM: { x: 0, y: getCenterY() + 50 }\n    },\n    STAY: {\n      TO: { x: 0, y: getCenterY() },\n      FROM: { x: 0, y: getCenterY() + 10 }\n    },\n    FADEOUT: {\n      TO: { x: 0, y: getCenterY() - 150 },\n      FROM: { x: 0, y: getCenterY() }\n    }\n  }\n};\n\nconst imgs = [\n  {\n    id: getRandomId(),\n    from: 3500,\n    to: 4000,\n    img: \"./images/vrmonkey_tran.png\",\n    rect: { x: \"auto\", y: \"auto\", width: 300, height: \"auto\" },\n    moveTo: { x: 0, y: getCenterY() - 50 },\n    moveFrom: MOVES.CENTER.FADEIN.FROM,\n    eff: [\"SkewedRight\"]\n  },\n  {\n    id: getRandomId(),\n    from: 4000,\n    to: 5000,\n    img: \"./images/vrmonkey_tran.png\",\n    rect: { x: \"auto\", y: \"auto\", width: 300, height: \"auto\" },\n    moveTo: { x: 0, y: getCenterY() - 80 },\n    moveFrom: { x: 0, y: getCenterY() - 50 },\n    eff: [\"Stay\"]\n  },\n  {\n    id: getRandomId(),\n    from: 5000,\n    to: 5500,\n    img: \"./images/vrmonkey_tran.png\",\n    rect: { x: \"auto\", y: \"auto\", width: 300, height: \"auto\" },\n    moveTo: { x: 0, y: getCenterY() - 200 },\n    moveFrom: { x: 0, y: getCenterY() - 80 },\n    eff: [\"SkewedRightReverse\"]\n  }\n];\n\nconst txts = [\n  {\n    id: getRandomId(),\n    from: 10,\n    to: 500,\n    text: CONTENTS.OPEN1.value,\n    style: CONTENTS.OPEN1.style,\n    link: null,\n    moveTo: MOVES.CENTER.FADEIN.TO,\n    moveFrom: MOVES.CENTER.FADEIN.FROM,\n    eff: [\"SkewedRight\"]\n  },\n  {\n    id: getRandomId(),\n    from: 500,\n    to: 1000,\n    text: CONTENTS.OPEN1.value,\n    style: CONTENTS.OPEN1.style,\n    link: CONTENTS.OPEN1.link,\n    moveTo: MOVES.CENTER.STAY.TO,\n    moveFrom: MOVES.CENTER.STAY.FROM,\n    eff: [\"Stay\"]\n  },\n  {\n    id: getRandomId(),\n    from: 1000,\n    to: 1500,\n    text: CONTENTS.OPEN1.value,\n    style: CONTENTS.OPEN1.style,\n    link: null,\n    moveTo: MOVES.CENTER.FADEOUT.TO,\n    moveFrom: MOVES.CENTER.FADEOUT.FROM,\n    eff: [\"SkewedRightReverse\"]\n  },\n  {\n    id: getRandomId(),\n    from: 1500,\n    to: 3000,\n    text: CONTENTS.OPEN2.value,\n    style: CONTENTS.OPEN2.style,\n    link: null,\n    moveTo: MOVES.CENTER.FADEIN.TO,\n    moveFrom: MOVES.CENTER.FADEIN.FROM,\n    eff: [\"SkewedRight\"]\n  },\n  {\n    id: getRandomId(),\n    from: 3000,\n    to: 3500,\n    text: CONTENTS.OPEN2.value,\n    style: CONTENTS.OPEN2.style,\n    link: CONTENTS.OPEN2.link,\n    moveTo: MOVES.CENTER.STAY.TO,\n    moveFrom: MOVES.CENTER.STAY.FROM,\n    eff: [\"Stay\"]\n  },\n  {\n    id: getRandomId(),\n    from: 3500,\n    to: 5000,\n    text: CONTENTS.OPEN2.value,\n    style: CONTENTS.OPEN2.style,\n    link: null,\n    moveTo: MOVES.CENTER.FADEOUT.TO,\n    moveFrom: MOVES.CENTER.FADEOUT.FROM,\n    eff: [\"SkewedRightReverse\"]\n  },\n  {\n    id: getRandomId(),\n    from: 5500,\n    to: 7000,\n    text: CONTENTS.OPEN3.value,\n    style: CONTENTS.OPEN3.style,\n    link: null,\n    moveTo: MOVES.CENTER.FADEIN.TO,\n    moveFrom: MOVES.CENTER.FADEIN.FROM,\n    eff: [\"SkewedRight\"]\n  },\n  {\n    id: getRandomId(),\n    from: 7000,\n    to: 8000,\n    text: CONTENTS.OPEN3.value,\n    style: CONTENTS.OPEN3.style,\n    link: CONTENTS.OPEN3.link,\n    moveTo: MOVES.CENTER.STAY.TO,\n    moveFrom: MOVES.CENTER.STAY.FROM,\n    eff: [\"Stay\"]\n  },\n  {\n    id: getRandomId(),\n    from: 8000,\n    to: 9500,\n    text: CONTENTS.OPEN3.value,\n    style: CONTENTS.OPEN3.style,\n    link: null,\n    moveTo: MOVES.CENTER.FADEOUT.TO,\n    moveFrom: MOVES.CENTER.FADEOUT.FROM,\n    eff: [\"PixelNoise\"]\n  }\n];\n\nexport default {\n  name: \"app\",\n  data: () => {\n    return {\n      ref: null,\n      bgcolor: {},\n      img: require(\"@/assets/vrmonkey_tran.png\"),\n      txts: txts,\n      imgs: imgs,\n      isHtmlView: false\n    };\n  },\n  components: {\n    // CanvasEffectView,\n    CanvasTextView,\n    HtmlView,\n    BackgroundImage,\n    ContextConsumer\n  },\n  mounted() {\n    const _scroller = scroller;\n    _scroller.setHeight(10000);\n    this.$nextTick(() => {\n      this.bgcolor = { r: 255, g: 255, b: 255 };\n    });\n  },\n  methods: {\n    setCanvasRef(ref) {\n      //html\n      HtmlSeq();\n    },\n    showHtmlView() {\n      console.log(\"showHtmlView\", this.isHtmlView);\n      this.isHtmlView = !this.isHtmlView;\n      const _scroller = scroller;\n      if (this.isHtmlView) {\n        _scroller.disable();\n      } else {\n        _scroller.enable(10000);\n      }\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\">\nhtml,\nbody {\n  height: 100%;\n  overflow: scroll;\n  margin: 0;\n  padding: 0;\n}\n\n#app {\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  // overflow: auto;\n  // width: 375px;\n}\n\n.navi {\n  position: fixed;\n  left: 16px;\n  bottom: 16px;\n  z-index: 2;\n}\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=f7c70394&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\nimport App from './App.vue'\n\nVue.config.productionTip = false\n\nnew Vue({\n  render: h => h(App),\n}).$mount('#app')\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CanvasTextView.vue?vue&type=style&index=0&id=242ec87b&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CanvasTextView.vue?vue&type=style&index=0&id=242ec87b&lang=scss&scoped=true&\"","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CanvasLayer.vue?vue&type=style&index=0&id=19d42ae0&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CanvasLayer.vue?vue&type=style&index=0&id=19d42ae0&lang=scss&scoped=true&\"","module.exports = __webpack_public_path__ + \"img/vrmonkey_tran.5165007a.png\";"],"sourceRoot":""}